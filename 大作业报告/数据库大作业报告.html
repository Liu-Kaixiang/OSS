<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --mermaid-theme: default; --mermaid-sequence-numbers: off; --mermaid-flowchart-curve: linear; --mermaid--gantt-left-padding: 75; --sequence-theme: simple; }


:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
							stroke-width: 0;
						}
</style><title>数据库大作业报告</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><p><span>RUC B2C购物系统</span></p><p><span>——基于flask+bootstrap前后端框架</span></p><p><span>小组成员：刘凯祥，王睿之，徐瑞泽，陈一航，王浩</span></p><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n4"><a class="md-toc-inner" href="#一需求分析">一、需求分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n7"><a class="md-toc-inner" href="#1-游客用户">(1) 游客/用户</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n10"><a class="md-toc-inner" href="#2-商家">(2) 商家</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n12"><a class="md-toc-inner" href="#3-管理员">(3) 管理员</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n14"><a class="md-toc-inner" href="#二数据库设计">二、数据库设计</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n15"><a class="md-toc-inner" href="#21-数据库环境说明">2.1 数据库环境说明</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n17"><a class="md-toc-inner" href="#22-概念设计">2.2 概念设计</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n62"><a class="md-toc-inner" href="#23-逻辑设计">2.3 逻辑设计</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n109"><a class="md-toc-inner" href="#1-用户表-1">(1) 用户表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n207"><a class="md-toc-inner" href="#2--管理员表">(2)  管理员表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n233"><a class="md-toc-inner" href="#3-事务表">(3) 事务表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n315"><a class="md-toc-inner" href="#4--店铺表">(4)  店铺表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n413"><a class="md-toc-inner" href="#5-商品表">(5) 商品表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n495"><a class="md-toc-inner" href="#6-商品图片表">(6) 商品图片表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n537"><a class="md-toc-inner" href="#7-商品属性表">(7) 商品属性表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n587"><a class="md-toc-inner" href="#8-订单中商品表">(8) 订单中商品表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n677"><a class="md-toc-inner" href="#9-购物车表">(9) 购物车表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n727"><a class="md-toc-inner" href="#10-分类表">(10) 分类表</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n761"><a class="md-toc-inner" href="#24--安全性设计">2.4  安全性设计</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n763"><a class="md-toc-inner" href="#241-防止用户直接操作数据库的方法">2.4.1 防止用户直接操作数据库的方法</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n765"><a class="md-toc-inner" href="#242-用户帐号密码的加密方法">2.4.2 用户帐号密码的加密方法</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n768"><a class="md-toc-inner" href="#243-角色与权限">2.4.3 角色与权限</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n774"><a class="md-toc-inner" href="#25-完整性设计">2.5 完整性设计</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n775"><a class="md-toc-inner" href="#251-完整性约束">2.5.1 完整性约束</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n789"><a class="md-toc-inner" href="#252-触发器">2.5.2 触发器</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n790"><a class="md-toc-inner" href="#1-删除商品">(1) 删除商品</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n793"><a class="md-toc-inner" href="#2-创建订单">(2) 创建订单</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n796"><a class="md-toc-inner" href="#253-数据库备份和恢复">2.5.3 数据库备份和恢复</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n799"><a class="md-toc-inner" href="#254-并发控制">2.5.4 并发控制</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n804"><a class="md-toc-inner" href="#三用户功能需求">三、用户功能需求</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n805"><a class="md-toc-inner" href="#31-总功能表与用例图">3.1 总功能表与用例图</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n840"><a class="md-toc-inner" href="#32-数据字典">3.2 数据字典</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n842"><a class="md-toc-inner" href="#33-不同实体功能设计">3.3 不同实体功能设计</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n843"><a class="md-toc-inner" href="#331-游客--用户">3.3.1 游客 / 用户</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n844"><a class="md-toc-inner" href="#1-游客--用户登录与注册">(1) 游客 / 用户登录与注册</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n847"><a class="md-toc-inner" href="#2-游客--用户商品浏览">(2) 游客 / 用户商品浏览</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n855"><a class="md-toc-inner" href="#3-用户购物车管理">(3) 用户购物车管理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n859"><a class="md-toc-inner" href="#4-用户个人信息管理">(4) 用户个人信息管理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n862"><a class="md-toc-inner" href="#5-用户投诉商家与开店申请">(5) 用户投诉商家与开店申请</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n865"><a class="md-toc-inner" href="#6-用户发起订单">(6) 用户发起订单</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n869"><a class="md-toc-inner" href="#7-用户管理订单">(7) 用户管理订单</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n872"><a class="md-toc-inner" href="#332-商家">3.3.2 商家</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n873"><a class="md-toc-inner" href="#1-店铺信息管理">(1) 店铺信息管理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n875"><a class="md-toc-inner" href="#2-商品管理与销售统计">(2) 商品管理与销售统计</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n898"><a class="md-toc-inner" href="#333-管理员">3.3.3 管理员</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n900"><a class="md-toc-inner" href="#1-登录-1">(1) 登录</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n902"><a class="md-toc-inner" href="#2-对用户信息管理">(2) 对用户信息管理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n904"><a class="md-toc-inner" href="#3-处理投诉--申请">(3) 处理投诉 / 申请</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n908"><a class="md-toc-inner" href="#4-查询订单">(4) 查询订单</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n910"><a class="md-toc-inner" href="#四系统描述实现">四、系统描述实现</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n911"><a class="md-toc-inner" href="#41-python环境">4.1 python环境</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n917"><a class="md-toc-inner" href="#42-数据库配置">4.2 数据库配置</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n929"><a class="md-toc-inner" href="#43-用户界面及系统结构设计">4.3 用户界面及系统结构设计</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n930"><a class="md-toc-inner" href="#431-网页模板设计">4.3.1 网页模板设计</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n968"><a class="md-toc-inner" href="#432-系统结构设计">4.3.2 系统结构设计</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n973"><a class="md-toc-inner" href="#44-数据获取策略">4.4 数据获取策略</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n975"><a class="md-toc-inner" href="#441-管理员表手工设定5个账号插入之后的效果如下">4.4.1 管理员表手工设定5个账号，插入之后的效果如下：</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n977"><a class="md-toc-inner" href="#442-然后从网上查找相关的商品和商家数据插入对应的表中">4.4.2 然后从网上查找相关的商品和商家数据插入对应的表中：</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n978"><a class="md-toc-inner" href="#1-商品表">(1) 商品表</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n980"><a class="md-toc-inner" href="#2-商品属性表">(2) 商品属性表</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n982"><a class="md-toc-inner" href="#3-商品图片表">(3) 商品图片表</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n984"><a class="md-toc-inner" href="#4-商家表">(4) 商家表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n986"><a class="md-toc-inner" href="#443-再手动插入一些用户和收货人的数据">4.4.3 再手动插入一些用户和收货人的数据：</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n987"><a class="md-toc-inner" href="#1-用户表-2">(1) 用户表</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n989"><a class="md-toc-inner" href="#2-收货人表">(2) 收货人表</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n991"><a class="md-toc-inner" href="#444-最后再在每个相应的表中插入少量数据用于测试">4.4.4 最后再在每个相应的表中插入少量数据用于测试</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n992"><a class="md-toc-inner" href="#1-订单表">(1) 订单表</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n994"><a class="md-toc-inner" href="#2-购物车表">(2) 购物车表</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n996"><a class="md-toc-inner" href="#3-标签表">(3) 标签表</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n998"><a class="md-toc-inner" href="#4-事物表">(4) 事物表</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1000"><a class="md-toc-inner" href="#45-运行测试及结果分析">4.5 运行测试及结果分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1001"><a class="md-toc-inner" href="#451-用户端功能">4.5.1 用户端功能</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1002"><a class="md-toc-inner" href="#1-登录-2">(1) 登录</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1013"><a class="md-toc-inner" href="#2-登出">(2) 登出</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1017"><a class="md-toc-inner" href="#3-注册">(3) 注册</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1028"><a class="md-toc-inner" href="#4-更改密码">(4) 更改密码</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1037"><a class="md-toc-inner" href="#5-更改个人信息">(5) 更改个人信息</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1046"><a class="md-toc-inner" href="#6-商品搜索">(6) 商品搜索</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1057"><a class="md-toc-inner" href="#7-商品排序">(7) 商品排序</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1068"><a class="md-toc-inner" href="#8-按类型查看商品">(8) 按类型查看商品</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1083"><a class="md-toc-inner" href="#9-添加购物车">(9) 添加购物车</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1090"><a class="md-toc-inner" href="#10-在购物车中进行商品购买">(10) 在购物车中进行商品购买</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1101"><a class="md-toc-inner" href="#11-订单搜索">(11) 订单搜索</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1108"><a class="md-toc-inner" href="#12-订单评价">(12) 订单评价</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1115"><a class="md-toc-inner" href="#452-商家端功能">4.5.2 商家端功能</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1117"><a class="md-toc-inner" href="#进入商家管理界面">进入商家管理界面</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1119"><a class="md-toc-inner" href="#商家管理界面">商家管理界面</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1121"><a class="md-toc-inner" href="#1-销售统计">(1) 销售统计</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1127"><a class="md-toc-inner" href="#2--下架商品">(2)  <strong>下架商品</strong></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1134"><a class="md-toc-inner" href="#3-添加商品">(3) 添加商品</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1141"><a class="md-toc-inner" href="#453-管理员功能">4.5.3 管理员功能</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1143"><a class="md-toc-inner" href="#进入管理员界面">进入管理员界面</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1145"><a class="md-toc-inner" href="#管理员界面">管理员界面</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1147"><a class="md-toc-inner" href="#1-处理事务">(1) 处理事务</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1154"><a class="md-toc-inner" href="#2-商店管理">(2) 商店管理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1161"><a class="md-toc-inner" href="#3-用户管理">(3) 用户管理</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n1168"><a class="md-toc-inner" href="#五项目实施过程中遇到的问题">五、项目实施过程中遇到的问题</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1169"><a class="md-toc-inner" href="#问题一">问题一</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1170"><a class="md-toc-inner" href="#1-问题描述-1">(1) 问题描述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1173"><a class="md-toc-inner" href="#2-原因分析-1">(2) 原因分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1177"><a class="md-toc-inner" href="#3-解决方法-1">(3) 解决方法</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1179"><a class="md-toc-inner" href="#问题二">问题二</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1180"><a class="md-toc-inner" href="#1-问题描述-2">(1) 问题描述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1183"><a class="md-toc-inner" href="#2-原因分析-2">(2) 原因分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1185"><a class="md-toc-inner" href="#3-解决方法-2">(3) 解决方法</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1187"><a class="md-toc-inner" href="#问题三">问题三</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1188"><a class="md-toc-inner" href="#1-问题描述-3">(1) 问题描述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1193"><a class="md-toc-inner" href="#2-原因分析-3">(2) 原因分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1195"><a class="md-toc-inner" href="#3-解决方法-3">(3) 解决方法</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1197"><a class="md-toc-inner" href="#问题四">问题四</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1198"><a class="md-toc-inner" href="#1-问题描述-4">(1) 问题描述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1200"><a class="md-toc-inner" href="#2-原因分析-4">(2) 原因分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1202"><a class="md-toc-inner" href="#3-解决方法-4">(3) 解决方法</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1204"><a class="md-toc-inner" href="#问题五">问题五</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1205"><a class="md-toc-inner" href="#1-问题描述-5">(1) 问题描述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1207"><a class="md-toc-inner" href="#2-原因分析-5">(2) 原因分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1209"><a class="md-toc-inner" href="#3-解决方法-5">(3) 解决方法</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1211"><a class="md-toc-inner" href="#问题六">问题六</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1212"><a class="md-toc-inner" href="#1-问题描述-6">(1) 问题描述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1214"><a class="md-toc-inner" href="#2-原因分析-6">(2) 原因分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1216"><a class="md-toc-inner" href="#3-解决方法-6">(3) 解决方法</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1218"><a class="md-toc-inner" href="#问题七">问题七</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1219"><a class="md-toc-inner" href="#1-问题描述-7">(1) 问题描述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1222"><a class="md-toc-inner" href="#2-原因分析-7">(2) 原因分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1224"><a class="md-toc-inner" href="#3-解决方法-7">(3) 解决方法</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n1227"><a class="md-toc-inner" href="#六团队分工">六、团队分工</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n1233"><a class="md-toc-inner" href="#七项目资源">七、项目资源</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n1240"><a class="md-toc-inner" href="#参考文献和资料">参考文献和资料</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1241"><a class="md-toc-inner" href="#1-虚拟环境的配置">1. 虚拟环境的配置</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1249"><a class="md-toc-inner" href="#2-boostrap参考">2. boostrap参考</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1259"><a class="md-toc-inner" href="#3-flask教程">3. flask教程</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1267"><a class="md-toc-inner" href="#4-部分网页设计参考">4. 部分网页设计参考</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1271"><a class="md-toc-inner" href="#5-数据库相关">5. 数据库相关</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1279"><a class="md-toc-inner" href="#6-github相关">6. GitHub相关</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1283"><a class="md-toc-inner" href="#7-部分数据来源">7. 部分数据来源</a></span></p></div><p>&nbsp;</p><div style="page-break-after:always;"></div><h1 id='一需求分析'><span>一、需求分析</span></h1><p><span>		</span><span>本作业旨在设计一个 B2C 线上购物系统，实现用户购买商品、开设店铺等基本功能以及管理员的管理等。因此，我们首先分析确定数据库的使用对象共用三类人群：游客/用户、商家及管理员，具体介绍如下：</span></p><div class="md-diagram-panel md-fences-adv-panel"><svg id="mermaidChart0" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="237" style="max-width: 278.84375px;" viewBox="0 0 278.84375 237"><style>#mermaidChart0{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart0 .error-icon{fill:#552222;}#mermaidChart0 .error-text{fill:#552222;stroke:#552222;}#mermaidChart0 .edge-thickness-normal{stroke-width:2px;}#mermaidChart0 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart0 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart0 .marker{fill:#333333;}#mermaidChart0 .marker.cross{stroke:#333333;}#mermaidChart0 svg{font-family:sans-serif;font-size:16px;}#mermaidChart0 .label{font-family:sans-serif;color:#333;}#mermaidChart0 .label text{fill:#333;}#mermaidChart0 .node rect,#mermaidChart0 .node circle,#mermaidChart0 .node ellipse,#mermaidChart0 .node polygon,#mermaidChart0 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart0 .node .label{text-align:center;}#mermaidChart0 .node.clickable{cursor:pointer;}#mermaidChart0 .arrowheadPath{fill:#333333;}#mermaidChart0 .edgePath .path{stroke:#333333;stroke-width:1.5px;}#mermaidChart0 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart0 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaidChart0 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaidChart0 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart0 .cluster text{fill:#333;}#mermaidChart0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80,100%,96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart0:root{--mermaid-font-family:sans-serif;}#mermaidChart0:root{--mermaid-alt-font-family:sans-serif;}#mermaidChart0 flowchart-v2{fill:apa;}</style><g transform="translate(0, -0.0000019073486328125)"><marker id="flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M91.25737972903346,98.33333206176758L102.71448310752788,86.63888772328694C114.1715864860223,74.94444338480632,137.08579324301115,51.555554707845054,152.70956328817223,39.86111036936442C168.33333333333334,28.16666603088379,176.66666666666666,28.16666603088379,180.83333333333334,28.16666603088379L185,28.16666603088379" id="L-a-b" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-a LE-b" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M135,118.49999809265137L139.16666666666666,118.49999809265137C143.33333333333334,118.49999809265137,151.66666666666666,118.49999809265137,163.23697916666666,118.49999809265137C174.80729166666666,118.49999809265137,189.61458333333334,118.49999809265137,197.01822916666666,118.49999809265137L204.421875,118.49999809265137" id="L-a-c" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-a LE-c" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M91.25737972903346,138.66666412353516L102.71448310752788,150.36110846201578C114.1715864860223,162.05555280049643,137.08579324301115,185.44444147745767,154.61320912150558,197.13888581593832C172.140625,208.83333015441895,184.28125,208.83333015441895,190.3515625,208.83333015441895L196.421875,208.83333015441895" id="L-a-d" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-a LE-d" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default default" id="flowchart-a-7" transform="translate(71.5, 118.49999809265137)"><rect class="basic label-container" style="" rx="0" ry="0" x="-63.5" y="-20.166666984558105" width="127" height="40.33333396911621"></rect><g class="label" style="" transform="translate(-56, -12.666666984558105)"><foreignObject width="112" height="25.33333396911621"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>数据库使用对象</span></div></foreignObject></g></g><g class="node default default" id="flowchart-b-9" transform="translate(227.921875, 28.16666603088379)"><rect class="basic label-container" style="" rx="0" ry="0" x="-42.921875" y="-20.166666984558105" width="85.84375" height="40.33333396911621"></rect><g class="label" style="" transform="translate(-35.421875, -12.666666984558105)"><foreignObject width="70.84375" height="25.33333396911621"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>游客/用户</span></div></foreignObject></g></g><g class="node default default" id="flowchart-c-11" transform="translate(227.921875, 118.49999809265137)"><rect class="basic label-container" style="" rx="0" ry="0" x="-23.5" y="-20.166666984558105" width="47" height="40.33333396911621"></rect><g class="label" style="" transform="translate(-16, -12.666666984558105)"><foreignObject width="32" height="25.33333396911621"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>商家</span></div></foreignObject></g></g><g class="node default default" id="flowchart-d-13" transform="translate(227.921875, 208.83333015441895)"><rect class="basic label-container" style="" rx="0" ry="0" x="-31.5" y="-20.166666984558105" width="63" height="40.33333396911621"></rect><g class="label" style="" transform="translate(-24, -12.666666984558105)"><foreignObject width="48" height="25.33333396911621"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span>管理员</span></div></foreignObject></g></g></g></g></g></svg></div><h3 id='1-游客用户'><span>(1) 游客/用户</span></h3><p><span>		</span><span>游客是未在网站上进行注册的用户，其仅能浏览商品，不能进行任何操作。而游客注册之后则正式成为线上购物平台用户，可以进行购买、收藏、评价商品，也可以将商品添加到购物车中等操作。用户的购买通过订单实现；用户可以向管理员提交开设店铺或者投诉的申请，拥有店铺的用户同时对店铺进行管理。</span></p><p><span>		</span><strong><span>由于游客无法对界面进行任何操作，故接下来不再单独分析游客行为。</span></strong></p><h3 id='2-商家'><span>(2) 商家</span></h3><p><span>		</span><span>商家主要进行商品的销售，对用户的订单进行处理。</span></p><h3 id='3-管理员'><span>(3) 管理员</span></h3><p><span>		</span><span>管理员主要对用户提交的事物进行处理。</span></p><h1 id='二数据库设计'><span>二、数据库设计</span></h1><h2 id='21-数据库环境说明'><span>2.1 数据库环境说明</span></h2><p><span>操作系统：Windows 10</span>
<span>数据库系统：SQL Server 2019</span>
<span>数据库编码方式为 utf-8，数据库中主要字符的编码格式为 utf-8。其中一个英文字符占用 1 个字节，一个中文字符占用三个字节。</span></p><h2 id='22-概念设计'><span>2.2 概念设计</span></h2><p><img src=".\Images\E-R.png" referrerpolicy="no-referrer" alt="E-R"></p><p><strong><span>解释</span></strong><span>：</span></p><p><span>包含7个实体和10个联系</span></p><ul><li><p><span>实体：</span></p><ul><li><span>用户：用户编号、用户名、登录密码、</span></li><li><span>管理员：管理员编号、用户编号、</span></li><li><span>事务：事务编号、事务类型、事务状态</span></li><li><span>店铺：店铺编号、店铺名、地址</span></li><li><span>商品：商品编号、商品名称、商品描述</span></li><li><span>订单：订单编号、总金额</span></li><li><span>购物车：购物车编号</span></li></ul></li><li><p><span>联系：</span></p><ul><li><span>用户提交事务：内容描述</span></li><li><span>管理员处理事务：处理备注</span></li><li><span>用户管理店铺</span></li><li><span>用户拥有购物车：购物车编号</span></li><li><span>购物车包含商品：商品数量</span></li><li><span>用户评价商品：内容、分值</span></li><li><span>用户下单</span></li><li><span>订单包含商品：商品数量</span></li><li><span>店铺处理订单</span></li><li><span>店铺销售商品：销量、库存、售价、进价</span></li></ul></li></ul><h2 id='23-逻辑设计'><span>2.3 逻辑设计</span></h2><p>&emsp;&emsp;<span>为了不与SQL Server关键字重复，&quot;用户表&quot;、&quot;管理员表&quot;、&quot;事务表&quot;的表名并不设为&quot;user&quot;、&quot;admin&quot;以及&quot;transaction&quot;，而是在三个表名之后添加&#39;_inf&#39;。</span></p><figure><table><thead><tr><th><span>表名</span></th><th><span>英文名</span></th><th><span>功能说明</span></th></tr></thead><tbody><tr><td><span>用户表</span></td><td><span>user_inf</span></td><td><span>保存用户信息</span></td></tr><tr><td><span>管理员表</span></td><td><span>admin_inf</span></td><td><span>保存管理员信息</span></td></tr><tr><td><span>事务表</span></td><td><span>transaction_inf</span></td><td><span>记录事务信息</span></td></tr><tr><td><span>店铺表</span></td><td><span>shop</span></td><td><span>记录店铺信息</span></td></tr><tr><td><span>商品表</span></td><td><span>goods</span></td><td><span>保存商品信息</span></td></tr><tr><td><span>商品图片表</span></td><td><span>goods_image</span></td><td><span>保存商品的预览图地址</span></td></tr><tr><td><span>商品属性表</span></td><td><span>goods_attribute</span></td><td><span>记录商品的属性信息</span></td></tr><tr><td><span>订单中商品表</span></td><td><span>goods_in_orders</span></td><td><span>记录订单中的商品信息</span></td></tr><tr><td><span>购物车表</span></td><td><span>shopping_cart</span></td><td><span>保存购物车信息</span></td></tr><tr><td><span>分类表</span></td><td><span>category</span></td><td><span>提供两层分类</span></td></tr></tbody></table></figure><h3 id='1-用户表-1'><span>(1) 用户表</span></h3><figure><table><thead><tr><th><span>列名</span></th><th><span>数据类型（精度范围）</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>备注</span></th></tr></thead><tbody><tr><td><span>user_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td><span>是</span></td><td>&nbsp;</td><td><span>用户编号</span></td><td><span>主键，从1开始自增</span></td></tr><tr><td><span>username</span></td><td><span>可变字符型（25位）</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>用户名</span></td><td><span>注册/登录时填写。唯一 。字母、数字、&#39;-&#39;、下划线的组合，以字母开头</span></td></tr><tr><td><span>password</span></td><td><span>可变字符型（120位）</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>登录密码</span></td><td><span>MD5加密后结果</span></td></tr><tr><td><span>nickname</span></td><td><span>可变字符型（20位）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>昵称</span></td><td><span>默认为用户名</span></td></tr><tr><td><span>phone</span></td><td><span>字符型 (11位)</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>手机号</span></td><td><span>注册/登陆时填写。唯一</span></td></tr><tr><td><span>email</span></td><td><span>可变字符型 (20位)</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>邮箱号</span></td><td><span>注册/登陆时填写。唯一</span></td></tr><tr><td><span>avatar</span></td><td><span>可变字符型（50位）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>头像</span></td><td><span>图片地址，默认头像为 </span><code>images/avatars/default.jpg</code><span>。当用户自主设置时，采用时间格式</span><code>yyyyMMddHHmmssSSS</code><span>(精确到毫秒)并追加随机3位(10以内)数字 + &#39;.jpg&#39; 形式存储于文件系统中, 并更新数据库中图片地址</span></td></tr><tr><td><span>sex</span></td><td><span>枚举类型</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>性别</span></td><td><span>男，女，保密三选一</span></td></tr><tr><td><span>birthday</span></td><td><span>日期类型</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>出生日期</span></td><td>&nbsp;</td></tr><tr><td><span>province</span></td><td><span>可变字符型（20位）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>省份</span></td><td>&nbsp;</td></tr><tr><td><span>is_valid</span></td><td><span>布尔型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>状态</span></td><td><span>默认为true</span></td></tr></tbody></table></figure><h3 id='2--管理员表'><span>(2)  管理员表</span></h3><figure><table><thead><tr><th><span>英文名</span></th><th><span>数据类型（精度范围）</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>admin_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td><span>是</span></td><td>&nbsp;</td><td><span>管理员编号</span></td><td><span>主键</span></td></tr><tr><td><span>user_id</span></td><td><span>整形</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>用户编号</span></td><td><span>每一个管理员实际上为一个用户，通过用户id确认其是否为管理员</span></td></tr></tbody></table></figure><h3 id='3-事务表'><span>(3) 事务表</span></h3><figure><table><thead><tr><th><span>列名</span></th><th><span>数据类型（精度范围）</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>transaction_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td><span>是</span></td><td>&nbsp;</td><td><span>事务编号</span></td><td><span>主键，从1开始自增</span></td></tr><tr><td><span>user_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td><span>是</span></td><td><span>用户编号</span></td><td><span>外键，提交人</span></td></tr><tr><td><span>admin_id</span></td><td><span>整型</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>是</span></td><td><span>管理员编号</span></td><td><span>外键，处理人，提交时为空</span></td></tr><tr><td><span>transaction_type</span></td><td><span>枚举类型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>事务类型</span></td><td><span>开店申请，用户投诉</span></td></tr><tr><td><span>transaction_status</span></td><td><span>枚举类型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>事务状态</span></td><td><span>未处理，已通过，已拒绝</span></td></tr><tr><td><span>comment</span></td><td><span>可变字符型（300位）</span></td><td><span>非空 ,不超过 100 个汉字</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>内容描述</span></td><td>&nbsp;</td></tr><tr><td><span>commit_time</span></td><td><span>时间类型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>提交时间</span></td><td>&nbsp;</td></tr><tr><td><span>complete_time</span></td><td><span>时间类型</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>完毕时间</span></td><td>&nbsp;</td></tr><tr><td><span>is_valid</span></td><td><span>布尔型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>状态</span></td><td><span>默认为true</span></td></tr></tbody></table></figure><h3 id='4--店铺表'><span>(4)  店铺表</span></h3><figure><table><thead><tr><th><span>列名</span></th><th><span>数据类型（精度范围）</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>shop_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td><span>是</span></td><td>&nbsp;</td><td><span>店铺编号</span></td><td><span>主键，自增</span></td></tr><tr><td><span>user_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td><span>是</span></td><td><span>用户编号</span></td><td><span>外键，绑定的用户</span></td></tr><tr><td><span>shop_name</span></td><td><span>可变字符型（90位）</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>店铺名称</span></td><td><span>不超过 30 个汉字</span></td></tr><tr><td><span>address</span></td><td><span>可变字符型（150位）</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>店铺地址</span></td><td><span>不超过 50 个汉字</span></td></tr><tr><td><span>phone</span></td><td><span>字符型（11位）</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>联系方式</span></td><td><span>用户手机号</span></td></tr><tr><td><span>shop_describe</span></td><td><span>可变字符型（300位）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>店铺描述</span></td><td><span>未设置则显示默认值--&quot;暂无描述&quot;。不超过 100 个汉字</span></td></tr><tr><td><span>announcement</span></td><td><span>可变字符型（300位）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>公告</span></td><td><span>未设置则显示默认值--&quot;暂无公告&quot;。不超过 100 个汉字</span></td></tr><tr><td><span>evaluate_sum</span></td><td><span>长整型</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>总评分</span></td><td><span>店铺总评分，初始为0</span></td></tr><tr><td><span>evaluate_number</span></td><td><span>长整型</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>评分人数</span></td><td><span>评价过的人数，初始为0</span></td></tr><tr><td><span>is_valid</span></td><td><span>布尔型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>状态</span></td><td><span>默认为true</span></td></tr><tr><td><span>apply_status</span></td><td><span>枚举类型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>申请状态</span></td><td><span>未处理，已通过，已拒绝</span></td></tr></tbody></table></figure><h3 id='5-商品表'><span>(5) 商品表</span></h3><figure><table><thead><tr><th><span>列名</span></th><th><span>数值类型</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>备注</span></th></tr></thead><tbody><tr><td><span>goods_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td><span>是</span></td><td>&nbsp;</td><td><span>商品编号</span></td><td><span>从1开始自增</span></td></tr><tr><td><span>category_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td><span>是</span></td><td><span>分类编号</span></td><td>&nbsp;</td></tr><tr><td><span>shop_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>是</span></td><td><span>店铺编号</span></td></tr><tr><td><span>goods_name</span></td><td><span>可变字符型（90位）</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>商品名称</span></td><td><span>不超过 30 汉字</span></td></tr><tr><td><span>goods_describe</span></td><td><span>可变字符型（300位）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>商品描述</span></td><td><span>不超过 100 汉字</span></td></tr><tr><td><span>sales</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>销量</span></td><td><span>默认为0</span></td></tr><tr><td><span>discount_deadline</span></td><td><span>时间类型</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>打折截止时间</span></td><td><span>默认为 2000-01-01 00:00:00</span></td></tr><tr><td><span>discount_rate</span></td><td><span>double</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>打折比例</span></td><td><span>默认为1</span></td></tr><tr><td><span>is_valid</span></td><td><span>布尔型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>状态</span></td><td><span>默认为true</span></td></tr></tbody></table></figure><h3 id='6-商品图片表'><span>(6) 商品图片表</span></h3><figure><table><thead><tr><th><span>列名</span></th><th><span>数值类型</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>备注</span></th></tr></thead><tbody><tr><td><span>image_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td><span>是</span></td><td>&nbsp;</td><td><span>图像编号</span></td><td><span>从1开始自增</span></td></tr><tr><td><span>goods_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td><span>是</span></td><td><span>商品编号</span></td><td>&nbsp;</td></tr><tr><td><span>image_addr</span></td><td><span>字符型（50位）</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>图像地址</span></td><td><span>采用时间格式</span><code>yyyyMMddHHmmssSSS</code><span>(精确到毫秒)并追加随机3位(10以内)数字 + &#39;.jpg&#39; 。每次获取图像时，根据图像地址排序，最多获取最近上传的 6 张</span></td></tr><tr><td><span>is_valid</span></td><td><span>布尔型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>状态</span></td><td><span>默认为true</span></td></tr></tbody></table></figure><h3 id='7-商品属性表'><span>(7) 商品属性表</span></h3><figure><table><thead><tr><th><span>列名</span></th><th><span>数值类型</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>备注</span></th></tr></thead><tbody><tr><td><span>goods_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td><span>是</span></td><td><span>商品编号</span></td><td>&nbsp;</td></tr><tr><td><span>cost</span></td><td><span>double</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>进价</span></td><td>&nbsp;</td></tr><tr><td><span>price</span></td><td><span>double</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>售价</span></td><td>&nbsp;</td></tr><tr><td><span>inventory</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>库存</span></td><td><span>默认为0</span></td></tr><tr><td><span>is_valid</span></td><td><span>布尔型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>状态</span></td><td><span>默认为true</span></td></tr></tbody></table></figure><h3 id='8-订单中商品表'><span>(8) 订单中商品表</span></h3><figure><table><thead><tr><th><span>列名</span></th><th><span>数值类型</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>备注</span></th></tr></thead><tbody><tr><td><span>order_id</span></td><td><span>长整型</span></td><td><span>非空</span></td><td><span>是</span></td><td>&nbsp;</td><td><span>订单编号</span></td><td><span>提交订单时系统自动生成，从 1 开始</span></td></tr><tr><td><span>goods_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>商品编号</span></td><td>&nbsp;</td></tr><tr><td><span>goods_num</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>商品数量</span></td><td>&nbsp;</td></tr><tr><td><span>cost</span></td><td><span>double</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>交易时成本</span></td><td><span>用户不可见</span></td></tr><tr><td><span>actual_price</span></td><td><span>double</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>成交价</span></td><td>&nbsp;</td></tr><tr><td><span>comment</span></td><td><span>可变字符型（300位）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>评价内容</span></td><td><span>不超过 100 个汉字</span></td></tr><tr><td><span>evaluate_score</span></td><td><span>短整型</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>评价分值</span></td><td><span>0~5,5个评分等级</span></td></tr><tr><td><span>time</span></td><td><span>时间类型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>下单时间</span></td><td>&nbsp;</td></tr><tr><td><span>shop_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td><span>是</span></td><td><span>店铺编号</span></td><td>&nbsp;</td></tr><tr><td><span>user_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td><span>是</span></td><td><span>用户编号</span></td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='9-购物车表'><span>(9) 购物车表</span></h3><figure><table><thead><tr><th><span>列名</span></th><th><span>数据类型（精度范围）</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>备注</span></th></tr></thead><tbody><tr><td><span>cart_id</span></td><td><span>长整型</span></td><td><span>非空</span></td><td><span>是</span></td><td>&nbsp;</td><td><span>购物车记录编号</span></td><td><span>从1开始自增</span></td></tr><tr><td><span>user_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>用户编号</span></td><td>&nbsp;</td></tr><tr><td><span>goods_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>商品编号</span></td><td><span>为保证查询效率，增加的goods_id冗余</span></td></tr><tr><td><span>goods_num</span></td><td><span>整型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>商品数量</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="3.52ex" height="1.819ex" role="img" focusable="false" viewBox="0 -666 1555.8 804" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.312ex;"><defs><path id="MJX-7-TEX-N-2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path><path id="MJX-7-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="2265" xlink:href="#MJX-7-TEX-N-2265"></use></g><g data-mml-node="mn" transform="translate(1055.8,0)"><use data-c="31" xlink:href="#MJX-7-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≥</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">\geq 1</script><span>， 当用户删除商品时，将 is_valid 改为 false，而不将商品数量减为 0</span></td></tr><tr><td><span>is_valid</span></td><td><span>布尔型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>状态</span></td><td><span>默认为true</span></td></tr></tbody></table></figure><h3 id='10-分类表'><span>(10) 分类表</span></h3><figure><table><thead><tr><th><span>列名</span></th><th><span>数据类型（精度范围）</span></th><th><span>空/非空</span></th><th><span>主键</span></th><th><span>外键</span></th><th><span>含义</span></th><th><span>备注</span></th></tr></thead><tbody><tr><td><span>category_id</span></td><td><span>整型</span></td><td><span>非空</span></td><td><span>是</span></td><td>&nbsp;</td><td><span>分类编号</span></td><td><span>大分类</span></td></tr><tr><td><span>category_name</span></td><td><span>可变字符型（30位）</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>分类名</span></td><td><span>分类名</span></td></tr><tr><td><span>is_valid</span></td><td><span>布尔型</span></td><td><span>非空</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>状态</span></td><td><span>默认为true</span></td></tr></tbody></table></figure><h2 id='24--安全性设计'><span>2.4  安全性设计</span></h2><p><span>		</span><span>提高软件系统的安全性应当从“管理”和“设计”两方面着手。这里仅考虑数据库的安全性设计。</span></p><h3 id='241-防止用户直接操作数据库的方法'><span>2.4.1 防止用户直接操作数据库的方法</span></h3><p><span>		</span><span>一般用户只能用帐号登陆到网站，通过网站访问数据库，而没有其它途径操作数据库。</span></p><h3 id='242-用户帐号密码的加密方法'><span>2.4.2 用户帐号密码的加密方法</span></h3><p><span>		</span><span>尝试对用户帐号的密码进行加密处理，确保在任何地方都不会出现密码的明文。用户在前端注册后，密码通过form表单传输给后端，Python后端读取密码后通过</span><code>hashlib.md5()</code><span>编码写进数据库，数据库管理员也无法通过数据库直接获得密码的明文。用户登录时数据库提取对应的用户名由系统对密码进行解码并进行匹配，若一致则能登入网站。</span></p><p><img src="./Images/hashlib编码.png" referrerpolicy="no-referrer" alt="avatar"></p><h3 id='243-角色与权限'><span>2.4.3 角色与权限</span></h3><p><span>		</span><span>如无特别说明，只有管理员可以查看各表的编号。</span></p><p><span>		</span><span>商家同时具有用户的所有权限。</span></p><table border="1">
<tbody><tr>
 <th>角色</th>
 <th>可以访问的表与列</th>
 <th>操作权限</th>
</tr>
<tr>
 <th rowspan="4">用户</th>
 <td>商品表所有列</td>
 <td>检索</td>
</tr>
<tr>
 <td>分类表所有列</td>
 <td>检索</td>
</tr>
<tr>
 <td>商品属性表：除了进价</td>
 <td>检索</td>
</tr>
<tr>
 <td>店铺表所有列</td>
 <td>检索</td>
</tr>   <!--游客表结束-->
<tr>
 <th rowspan="4">商家</th>
 <td>商品表所有列</td>
 <td>检索、增加、删除</td>
</tr>
<tr>
 <td>分类表所有列</td>
 <td>检索</td>
</tr>
<tr>
 <td>商品属性表</td>
 <td>检索、增加、删除</td>
</tr>
<tr>
 <td>店铺表所有列</td>
 <td>检索、增加、删除</td>
</tr>   <!--商家表结束-->
<tr>
 <th rowspan="6">管理员</th>
 <td>商品表所有列</td>
 <td>检索、增加、删除</td>
</tr>
<tr>
 <td>分类表所有列</td>
 <td>检索</td>
</tr>
<tr>
 <td>商品属性表</td>
 <td>检索</td>
</tr>
<tr>
 <td>店铺表所有列</td>
 <td>检索</td>
</tr>
<tr>
 <td>订单表所有列</td>
 <td>检索</td>
</tr>
<tr>
 <td>用户表所有列</td>
 <td>检索</td>
</tr>    <!--管理员表结束--></tbody></table><p>&nbsp;</p><h2 id='25-完整性设计'><span>2.5 完整性设计</span></h2><h3 id='251-完整性约束'><span>2.5.1 完整性约束</span></h3><figure><table><thead><tr><th style='text-align:left;' ><span>约束类型</span></th><th style='text-align:left;' ><span>实例</span></th></tr></thead><tbody><tr><td style='text-align:left;' ><span>自增约束</span></td><td style='text-align:left;' ><span>数据库主码属性如商品表中的</span><code>goods_id</code><span>、订单表中的</span><code>order_id</code><span>、用户表中的</span><code>user_id</code><span>等都实现了自增约束。</span></td></tr><tr><td style='text-align:left;' ><span>外码约束</span></td><td style='text-align:left;' ><span>用户表中的</span><code>user_id</code><span>是管理员表的</span><code>user_id</code><span>、订单表中的</span><code>user_id</code><span>的外码等。</span></td></tr><tr><td style='text-align:left;' ><span>默认约束</span></td><td style='text-align:left;' ><span>对于每个表都设置了</span><code>is_valid</code><span>属性，该属性的</span><code>default</code><span>值均为1，如果某元组失效，那么修改其</span><code>is_valid</code><span>值为0.</span></td></tr></tbody></table></figure><h3 id='252-触发器'><span>2.5.2 触发器</span></h3><h4 id='1-删除商品'><span>(1) 删除商品</span></h4><p><span>		</span><span>删除某个商品时（</span><code>is_valid</code><span>设置为0），将与之相关的商品属性和购物车全部删除（</span><code>is_valid</code><span>设置为0）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">trigger</span> delete_goods <span class="cm-keyword">on</span> goods <span class="cm-keyword">after</span> <span class="cm-keyword">update</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">as</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> <span class="cm-keyword">exists</span><span class="cm-bracket">(</span><span class="cm-keyword">select</span><span class="cm-operator">*</span> <span class="cm-keyword">from</span> inserted <span class="cm-keyword">where</span> is_valid<span class="cm-operator">=</span><span class="cm-number">0</span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> goods_attribute <span class="cm-keyword">set</span> is_valid <span class="cm-operator">=</span> <span class="cm-number">0</span> <span class="cm-keyword">where</span> goods_id <span class="cm-keyword">in</span> <span class="cm-bracket">(</span><span class="cm-keyword">select</span> goods_id <span class="cm-keyword">from</span> inserted <span class="cm-keyword">where</span> is_valid<span class="cm-operator">=</span><span class="cm-number">0</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> shopping_cart <span class="cm-keyword">set</span> is_valid <span class="cm-operator">=</span> <span class="cm-number">0</span> <span class="cm-keyword">where</span> goods_id <span class="cm-keyword">in</span> <span class="cm-bracket">(</span><span class="cm-keyword">select</span> goods_id <span class="cm-keyword">from</span> inserted <span class="cm-keyword">where</span> is_valid<span class="cm-operator">=</span><span class="cm-number">0</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> goods_image <span class="cm-keyword">set</span> is_valid <span class="cm-operator">=</span> <span class="cm-number">0</span> <span class="cm-keyword">where</span> goods_id <span class="cm-keyword">in</span> <span class="cm-bracket">(</span><span class="cm-keyword">select</span> goods_id <span class="cm-keyword">from</span> inserted <span class="cm-keyword">where</span> is_valid<span class="cm-operator">=</span><span class="cm-number">0</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string-2">go</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 272px;"></div><div class="CodeMirror-gutters" style="display: none; height: 272px;"></div></div></div></pre><h4 id='2-创建订单'><span>(2) 创建订单</span></h4><p><span>		</span><span>创建订单时，实现相应的商品的库存减少与销量增加</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">trigger</span> create_order <span class="cm-keyword">on</span> goods_in_orders <span class="cm-keyword">after</span> <span class="cm-keyword">insert</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">as</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">declare</span> <span class="cm-variable-2">@atr_id</span> <span class="cm-builtin">int</span><span class="cm-punctuation">,</span><span class="cm-variable-2">@good_num</span> <span class="cm-builtin">int</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">declare</span> cur <span class="cm-keyword">cursor</span> <span class="cm-keyword">for</span> <span class="cm-bracket">(</span><span class="cm-keyword">select</span> goods_id<span class="cm-punctuation">,</span>goods_num <span class="cm-keyword">from</span> inserted<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">open</span> cur</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">fetch</span> <span class="cm-keyword">next</span> <span class="cm-keyword">from</span> cur <span class="cm-keyword">into</span> <span class="cm-variable-2">@atr_id</span><span class="cm-punctuation">,</span><span class="cm-variable-2">@good_num</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">while</span> <span class="cm-variable-2">@@FETCH_STATUS</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> <span class="cm-variable-2">@good_num</span><span class="cm-operator">&gt;</span><span class="cm-bracket">(</span><span class="cm-keyword">select</span> inventory <span class="cm-keyword">from</span> goods_attribute <span class="cm-keyword">where</span> attribute_id<span class="cm-operator">=</span><span class="cm-variable-2">@atr_id</span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>raiserror<span class="cm-bracket">(</span><span class="cm-string">'购买数量多于库存'</span><span class="cm-punctuation">,</span><span class="cm-number">16</span><span class="cm-punctuation">,</span><span class="cm-number">1</span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">rollback</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">update</span> goods_attribute <span class="cm-keyword">set</span> inventory<span class="cm-operator">=</span>inventory<span class="cm-operator">-</span><span class="cm-variable-2">@good_num</span> <span class="cm-keyword">where</span> goods_id<span class="cm-operator">=</span><span class="cm-variable-2">@atr_id</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">update</span> goods <span class="cm-keyword">set</span> sales<span class="cm-operator">=</span>sales<span class="cm-operator">+</span><span class="cm-variable-2">@good_num</span> <span class="cm-keyword">where</span> goods_id<span class="cm-operator">=</span><span class="cm-variable-2">@atr_id</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">fetch</span> <span class="cm-keyword">next</span> <span class="cm-keyword">from</span> cur <span class="cm-keyword">into</span> <span class="cm-variable-2">@atr_id</span><span class="cm-punctuation">,</span><span class="cm-variable-2">@good_num</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">close</span> cur</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">deallocate</span> cur</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string-2">go</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 521px;"></div><div class="CodeMirror-gutters" style="display: none; height: 521px;"></div></div></div></pre><h3 id='253-数据库备份和恢复'><span>2.5.3 数据库备份和恢复</span></h3><p><span>		</span><span>数据库拥有者通过备份数据库（OSS）获得bak文件，其它组员可以通过使用bak文件获取当前数据库。</span></p><p><img src=".\Images\数据库备份.png" referrerpolicy="no-referrer" alt="avatar"></p><h3 id='254-并发控制'><span>2.5.4 并发控制</span></h3><p><span>		</span><span>并发控制通过在同一局域网下组员共同访问同一个数据库实现，小组内某组员关闭电脑防火墙并且将</span><code>IPv4</code><span>地址给予其它组员，则所有组员可以共同访问其中一位组员的数据库，从而五人可以同时操纵同一个数据库，完成并发测试。</span></p><p><img src=".\Images\并发测试IP.png" referrerpolicy="no-referrer" alt="avatar"></p><p><span>		</span><span>数据库拥有者在</span><code>config.py</code><span>中进行如下配置连接数据库，其它组员将</span><code>Server</code><span>由</span><code>localhost</code><span>改成对应的</span><code>IPv4</code><span>地址进行访问。</span></p><p><img src=".\Images\数据库连接.png" referrerpolicy="no-referrer" alt="avatar"></p><h1 id='三用户功能需求'><span>三、用户功能需求</span></h1><h2 id='31-总功能表与用例图'><span>3.1 总功能表与用例图</span></h2><p><span>系统需实现以下功能：</span></p><figure><table><thead><tr><th style='text-align:left;' ><strong><span>功能名称</span></strong></th><th style='text-align:left;' ><strong><span>功能概诉</span></strong></th></tr></thead><tbody><tr><td style='text-align:left;' ><span>商品查询与浏览</span></td><td style='text-align:left;' ><span>游客 / 用户对商品目录检索、关键词检索</span></td></tr><tr><td style='text-align:left;' ><span>购物车管理</span></td><td style='text-align:left;' ><span>用户对购物车内商品的添加、删除、更新</span></td></tr><tr><td style='text-align:left;' ><span>登陆与注册</span></td><td style='text-align:left;' ><span>游客注册；用户 / 管理员登陆，登录后用户只能查看到自己能使用的功能</span></td></tr><tr><td style='text-align:left;' ><span>用户信息管理</span></td><td style='text-align:left;' ><span>用户 / 管理员对用户信息的添加、删除、更新、查询</span></td></tr><tr><td style='text-align:left;' ><span>商品评价与查看</span></td><td style='text-align:left;' ><span>用户以已完成订单为依据对商品进行评价，系统可以对商品评价进行汇总</span></td></tr><tr><td style='text-align:left;' ><span>开店申请</span></td><td style='text-align:left;' ><span>用户发起开店申请，管理员处理申请</span></td></tr><tr><td style='text-align:left;' ><span>店铺信息管理</span></td><td style='text-align:left;' ><span>商家 / 管理员对店铺信息的添加、删除、更新、查询</span></td></tr><tr><td style='text-align:left;' ><span>商品管理</span></td><td style='text-align:left;' ><span>商家对商品的添加、删除、更新、状态查看</span></td></tr><tr><td style='text-align:left;' ><span>销售统计</span></td><td style='text-align:left;' ><span>店铺内整体 / 单品销量和利润趋势 / 分布的统计</span></td></tr></tbody></table></figure><p><span>		</span><span>为了保持用例图的简单，下面的用例图省去了登录与注册，也没有表现出合适的用户权限。</span></p><p><img src="./Images/功能说明/Graph1.png" referrerpolicy="no-referrer" alt="用例图"></p><h2 id='32-数据字典'><span>3.2 数据字典</span></h2><p><span>		</span><span>数据字典描述要和系统交互的数据。数据字典已移入数据库设计文档中。</span></p><h2 id='33-不同实体功能设计'><span>3.3 不同实体功能设计</span></h2><h3 id='331-游客--用户'><span>3.3.1 游客 / 用户</span></h3><h4 id='1-游客--用户登录与注册'><span>(1) 游客 / 用户登录与注册</span></h4><p><span>		</span><span>游客 / 用户注册或登录的用例活动图如下：</span></p><p><img src="./Images/功能说明/幻灯片1.PNG" referrerpolicy="no-referrer" alt="游客 / 用户商品查询与浏览"></p><h4 id='2-游客--用户商品浏览'><span>(2) 游客 / 用户商品浏览</span></h4><p><span>		</span><span>系统要支持目录和关键词两种方式搜索。 </span></p><ul><li><span>目录搜索指游客/用户可以通过网页头部的商品分类（如Electronic、Snack等）查看该分类下的所有商品。 </span></li><li><span>关键词搜索指游客/用户可以在搜索引擎中输入关键词（商家或商品的关键词）进行商品搜索。</span></li></ul><h4 id='3-用户购物车管理'><span>(3) 用户购物车管理</span></h4><p><span>		</span><span>用户可以通过商品页面直接填加商品到购物车。在管理购物车时，可以修改商品数量，也可以直接删除商品。用户购物车在关闭浏览器或者退出登录后仍保留。</span></p><p><span>		</span><span>用户购物车管理用例活动图如下：</span></p><p><img src="./Images/功能说明/幻灯片3.PNG" referrerpolicy="no-referrer" alt="游客 / 用户购物车管理"></p><h4 id='4-用户个人信息管理'><span>(4) 用户个人信息管理</span></h4><p><span>		</span><span>用户可以修改自己除用户名以外的任何个人信息，但不允许自主删除帐号。</span></p><h4 id='5-用户投诉商家与开店申请'><span>(5) 用户投诉商家与开店申请</span></h4><p><span>		</span><span>用户若对商家或订单有所不满，可以以已有订单作为投诉依据，投诉由管理员处理。</span></p><p><span>		</span><span>用户若想通过此系统销售物品，可以通过发起开店申请。开店申请由管理员处理。</span></p><h4 id='6-用户发起订单'><span>(6) 用户发起订单</span></h4><p><span>		</span><span>用户通过在购物车中挑选商品发起订单。</span></p><p><span>		</span><span>用户发起订单用例活动图如下：</span></p><p><img src="./Images/功能说明/幻灯片2.PNG" referrerpolicy="no-referrer" alt="用户发起订单"></p><h4 id='7-用户管理订单'><span>(7) 用户管理订单</span></h4><p><span>		</span><span>用户在订单管理中心能看到自己所有状态的所有订单，但只能查看详细信息，不能删除订单。订单管理中心要提供用户按时间和按关键词两种查询方式。订单完成或后用户可以立即或稍后对商品进行评价，评价将影响店铺评价等级。</span></p><h3 id='332-商家'><span>3.3.2 商家</span></h3><h4 id='1-店铺信息管理'><span>(1) 店铺信息管理</span></h4><p><span>		</span><span>商家可以修改自己店铺信息，不允许自主删除店铺。</span></p><h4 id='2-商品管理与销售统计'><span>(2) 商品管理与销售统计</span></h4><p><span>		</span><span>商家可以对自己店铺内的商品进行添加、修改、删除。商家可以对指定产品进行定时打折，可以指定打折后的金额或打折的比例。当商家删除商品时，系统要保留数据，以备后用。</span><br/><span>销售统计要产生报表，包括对店铺内整体、单个商品销售情况统计：</span></p><ol start='' ><li><p><span>整体销售统计：</span></p><ul><li><span>商品利润分布（饼图）。</span></li><li><span>商品销量分布（饼图）。</span></li><li><span>总销量趋势（折线图）。</span></li><li><span>总利润趋势（折线图）。</span></li></ul></li><li><p><span>单个商品销售统计：</span></p><ul><li><span>销量趋势（条形图）。</span></li><li><span>利润趋势（条形图）。</span></li></ul></li></ol><p><span>商家商品管理与销售统计用例活动图如下：</span></p><p><img src="./Images/功能说明/幻灯片5.PNG" referrerpolicy="no-referrer" alt="商家商品管理"></p><h3 id='333-管理员'><span>3.3.3 管理员</span></h3><p><span>		</span><span>管理员不能自主注册，只能通过给定的帐号进行登录。</span></p><h4 id='1-登录-1'><span>(1) 登录</span></h4><p><span>		</span><span>管理员登录时候供编号和密码。</span></p><h4 id='2-对用户信息管理'><span>(2) 对用户信息管理</span></h4><p><span>		</span><span>管理员可以通过用户手机号或用户名或昵称来定位用户。管理员可以添加系统用户、修改任何用户的个人信息，也可以删除任何用户。当管理员删除用户时，系统要保留数据，以备后用。</span></p><h4 id='3-处理投诉--申请'><span>(3) 处理投诉 / 申请</span></h4><p><span>		</span><span>管理员在处理投诉 / 申请时，要能直接点击订单号获取订单详细信息。投诉 / 申请由用户发起，由管理员处理 / 拒绝。</span></p><p><span>		</span><span>管理员处理投诉与开店申请用例活动图如下：</span></p><p><img src="./Images/功能说明/幻灯片6.PNG" referrerpolicy="no-referrer" alt="管理员处理投诉与开店申请"></p><h4 id='4-查询订单'><span>(4) 查询订单</span></h4><p><span>		</span><span>所有订单的所有状态对管理员可见。管理员可以通过订单号查询订单、查看订单详细信息，但不可操作订单状态。</span></p><h1 id='四系统描述实现'><span>四、系统描述实现</span></h1><h2 id='41-python环境'><span>4.1 python环境</span></h2><p><span>使用是venv虚拟环境，python为3.7及以上版本</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">pip freeze &gt; requirements.txt</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>安装的依赖项使用这个方法导出到文件中，可以直接用指令安装</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">pip install -r requirements/requirements.txt</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>项目使用的库基本是常见的库，所以可以不安装虚拟环境</span></p><h2 id='42-数据库配置'><span>4.2 数据库配置</span></h2><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">DATABASE</span> OSS</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">ON</span> <span class="cm-keyword">PRIMARY</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span> NAME <span class="cm-operator">=</span> oss_data<span class="cm-punctuation">,</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  FILENAME <span class="cm-operator">=</span> <span class="cm-string">'D:\sql_data\oss_data.mdf'</span><span class="cm-punctuation">,</span> <span class="cm-operator">--</span>修改此存储路径</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  SIZE <span class="cm-operator">=</span> <span class="cm-number">10</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  MAXSIZE <span class="cm-operator">=</span> <span class="cm-number">150</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  FILEGROWTH <span class="cm-operator">=</span> <span class="cm-number">5</span><span class="cm-operator">%</span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">LOG <span class="cm-keyword">ON</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span> NAME <span class="cm-operator">=</span> oss_log<span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  FILENAME <span class="cm-operator">=</span> <span class="cm-string">'D:\sql_log\oss_log.ldf'</span><span class="cm-punctuation">,</span> &nbsp; <span class="cm-operator">--</span>修改此存储路径</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  SIZE <span class="cm-operator">=</span> <span class="cm-number">2</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  MAXSIZE <span class="cm-operator">=</span> <span class="cm-number">50</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  FILEGROWTH <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 317px;"></div><div class="CodeMirror-gutters" style="display: none; height: 317px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> user_inf</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span>user_id<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> identity<span class="cm-bracket">(</span><span class="cm-number">1</span><span class="cm-punctuation">,</span><span class="cm-number">1</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> username<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">25</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">unique</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">password</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">120</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> nickname<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">25</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> phone<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">char</span><span class="cm-bracket">(</span><span class="cm-number">11</span><span class="cm-bracket">)</span> <span class="cm-keyword">unique</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> email<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">20</span><span class="cm-bracket">)</span> <span class="cm-keyword">unique</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> avatar<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">50</span><span class="cm-bracket">)</span> <span class="cm-keyword">default</span> <span class="cm-string">'/images/avatars/default.jpg'</span><span class="cm-punctuation">,</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> sex<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">8</span><span class="cm-bracket">)</span> <span class="cm-keyword">default</span> <span class="cm-string">'保密'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> birthday<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">date</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> province<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">20</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> is_valid<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">bit</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">check</span><span class="cm-bracket">(</span>sex <span class="cm-keyword">in</span> <span class="cm-bracket">(</span><span class="cm-string">'男'</span><span class="cm-punctuation">,</span><span class="cm-string">'女'</span><span class="cm-punctuation">,</span><span class="cm-string">'保密'</span><span class="cm-bracket">)))</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">create</span> <span class="cm-keyword">index</span> ID_user_un <span class="cm-keyword">on</span> user_inf<span class="cm-bracket">(</span>username<span class="cm-bracket">)</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 363px;"></div><div class="CodeMirror-gutters" style="display: none; height: 363px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> admin_inf</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span>admin_id<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">password</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">120</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> admin_name<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">20</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> email<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">20</span><span class="cm-bracket">)</span> <span class="cm-keyword">unique</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span><span class="cm-bracket">(</span>admin_id<span class="cm-bracket">))</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 136px;"></div><div class="CodeMirror-gutters" style="display: none; height: 136px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> transaction_inf</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span>transaction_id<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> identity<span class="cm-bracket">(</span><span class="cm-number">1</span><span class="cm-punctuation">,</span><span class="cm-number">1</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> user_id<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> admin_id<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">int</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> transaction_type<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">16</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> transaction_status<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">10</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">comment</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">300</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> commit_time<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">datetime</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> complete_time<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">datetime</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> annotation<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">300</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> is_valid<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">bit</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span><span class="cm-bracket">(</span>transaction_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">constraint</span> fk_apply <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span> <span class="cm-keyword">references</span> user_inf<span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span> <span class="cm-keyword">on</span> <span class="cm-keyword">delete</span> <span class="cm-keyword">no</span> <span class="cm-keyword">action</span> <span class="cm-keyword">on</span> <span class="cm-keyword">update</span> <span class="cm-keyword">cascade</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">constraint</span> fk_handle <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span><span class="cm-bracket">(</span>admin_id<span class="cm-bracket">)</span> <span class="cm-keyword">references</span> admin_inf<span class="cm-bracket">(</span>admin_id<span class="cm-bracket">)</span> <span class="cm-keyword">on</span> <span class="cm-keyword">delete</span> <span class="cm-keyword">no</span> <span class="cm-keyword">action</span> <span class="cm-keyword">on</span> <span class="cm-keyword">update</span> <span class="cm-keyword">cascade</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">check</span><span class="cm-bracket">(</span>transaction_status <span class="cm-keyword">in</span><span class="cm-bracket">(</span><span class="cm-string">'未处理'</span><span class="cm-punctuation">,</span><span class="cm-string">'已通过'</span><span class="cm-punctuation">,</span><span class="cm-string">'已拒绝'</span><span class="cm-bracket">))</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">check</span><span class="cm-bracket">(</span>transaction_type <span class="cm-keyword">in</span><span class="cm-bracket">(</span><span class="cm-string">'开店申请'</span><span class="cm-punctuation">,</span><span class="cm-string">'用户投诉'</span><span class="cm-bracket">)))</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 408px;"></div><div class="CodeMirror-gutters" style="display: none; height: 408px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> shop</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span>shop_id<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> identity<span class="cm-bracket">(</span><span class="cm-number">1</span><span class="cm-punctuation">,</span><span class="cm-number">1</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> user_id<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> apply_status<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">10</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-string">'待审核'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> shop_name<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">90</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> address<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">150</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> phone<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">char</span><span class="cm-bracket">(</span><span class="cm-number">11</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">img &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">50</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> shop_describe<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">300</span><span class="cm-bracket">)</span> <span class="cm-keyword">default</span> <span class="cm-string">'暂无描述'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> announcement<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">300</span><span class="cm-bracket">)</span> <span class="cm-keyword">default</span> <span class="cm-string">'暂无公告'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> evaluate_sum<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">bigint</span> <span class="cm-keyword">default</span> <span class="cm-number">0</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> evaluate_number<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">bigint</span> <span class="cm-keyword">default</span> <span class="cm-number">0</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> is_valid<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">bit</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span><span class="cm-bracket">(</span>shop_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">constraint</span> fk_shop_to_user <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span> <span class="cm-keyword">references</span> user_inf<span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span> <span class="cm-keyword">on</span> <span class="cm-keyword">delete</span> <span class="cm-keyword">no</span> <span class="cm-keyword">action</span> <span class="cm-keyword">on</span> <span class="cm-keyword">update</span> <span class="cm-keyword">cascade</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">check</span><span class="cm-bracket">(</span>apply_status <span class="cm-keyword">in</span><span class="cm-bracket">(</span><span class="cm-string">'待审核'</span><span class="cm-punctuation">,</span><span class="cm-string">'已通过'</span><span class="cm-punctuation">,</span><span class="cm-string">'未通过'</span><span class="cm-bracket">)))</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">create</span> <span class="cm-keyword">index</span> ID_shop_uid <span class="cm-keyword">on</span> shop<span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 431px;"></div><div class="CodeMirror-gutters" style="display: none; height: 431px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> goods</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; goods_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> identity<span class="cm-bracket">(</span><span class="cm-number">1</span><span class="cm-punctuation">,</span><span class="cm-number">1</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; category_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; shop_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; goods_name &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">90</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; sales &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-number">0</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; discount_deadline &nbsp; &nbsp;<span class="cm-builtin">datetime</span> <span class="cm-keyword">default</span> <span class="cm-string">'2000-01-01 00:00:00'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; discount_rate &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">float</span> <span class="cm-keyword">default</span> <span class="cm-number">1.00</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; is_valid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">bit</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-string">'TRUE'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; goods_describe &nbsp; &nbsp; &nbsp; <span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">300</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> fk_refer <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>category_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">references</span> category <span class="cm-bracket">(</span>category_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> fk_sell <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>shop_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">references</span> shop <span class="cm-bracket">(</span>shop_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 385px;"></div><div class="CodeMirror-gutters" style="display: none; height: 385px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> goods_image</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  image_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> identity<span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  goods_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  image_addr &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">50</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  is_valid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">bit</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>image_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">constraint</span> FK_goods_image <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-keyword">references</span> goods <span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">index</span> index_goods_id <span class="cm-keyword">on</span> goods_image<span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 272px;"></div><div class="CodeMirror-gutters" style="display: none; height: 272px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> goods_attribute</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; goods_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; cost &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">float</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; price &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">float</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; inventory &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">default</span> <span class="cm-number">0</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; is_valid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">bit</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> FK_attribute <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">references</span> goods <span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">check</span><span class="cm-bracket">(</span>inventory <span class="cm-operator">&gt;=</span> <span class="cm-number">0</span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">index</span> index_goods_id <span class="cm-keyword">on</span> goods_attribute<span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 295px;"></div><div class="CodeMirror-gutters" style="display: none; height: 295px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> goods_in_orders</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; order_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">bigint</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> identity<span class="cm-bracket">(</span><span class="cm-number">1</span><span class="cm-punctuation">,</span><span class="cm-number">1</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; goods_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; goods_num &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; cost &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">float</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; actual_price &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">float</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">comment</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">300</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; evaluate_score &nbsp; &nbsp; &nbsp; <span class="cm-keyword">smallint</span> <span class="cm-keyword">default</span> <span class="cm-number">0</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-builtin">time</span> &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">datetime</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; shop_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; user_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>order_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> fk_gio_g <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">references</span> goods <span class="cm-bracket">(</span>goods_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> fk_gio_s <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>shop_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">references</span> shop <span class="cm-bracket">(</span>shop_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> fk_gio_u <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">references</span> user_inf <span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">index</span> index_user_id <span class="cm-keyword">on</span> goods_order<span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 476px;"></div><div class="CodeMirror-gutters" style="display: none; height: 476px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> category</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; category_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> identity<span class="cm-bracket">(</span><span class="cm-number">1</span><span class="cm-punctuation">,</span><span class="cm-number">1</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; category_name &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">varchar</span><span class="cm-bracket">(</span><span class="cm-number">30</span><span class="cm-bracket">)</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; is_valid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">bit</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> pk_ctg_id <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>category_id<span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 159px;"></div><div class="CodeMirror-gutters" style="display: none; height: 159px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.33333px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> shopping_cart</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">bigint</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> identity<span class="cm-bracket">(</span><span class="cm-number">1</span><span class="cm-punctuation">,</span><span class="cm-number">1</span><span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; user_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">/* 为保证效率增加的 goods_id 冗余 */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; goods_id &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; goods_num &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; is_valid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">bit</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> pk_shopping_cart_id <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> fk_shopping_cart_user <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span> <span class="cm-keyword">references</span> user_inf <span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">constraint</span> chk_shopping_cart_goods_num <span class="cm-keyword">check</span><span class="cm-bracket">(</span>goods_num <span class="cm-operator">&gt;=</span> <span class="cm-number">0</span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">index</span> idx_shopping_cart_userId <span class="cm-keyword">ON</span> dbo<span class="cm-variable-2">.shopping_cart</span> <span class="cm-bracket">(</span>user_id<span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 317px;"></div><div class="CodeMirror-gutters" style="display: none; height: 317px;"></div></div></div></pre><h2 id='43-用户界面及系统结构设计'><span>4.3 用户界面及系统结构设计</span></h2><h3 id='431-网页模板设计'><span>4.3.1 网页模板设计</span></h3><p><span>		</span><span>在本地static文件夹下载了</span><code>bootstrap4</code><span>的前端</span><code>css</code><span>和</span><code>js</code><span>文件，加载到模板中。</span></p><p><span>模板使用的是框架配套的</span><code>jinja2</code><span>,各个网页通过继承</span><code>base.html</code><span>文件来达成各自的效果：</span></p><ul><li><code>base.html</code><span>：基于HTML文件，提供了对于整体网页架构的约束。</span></li><li><code>administrator.html</code><span>：继承</span><code>base.html</code><span>，用于实现管理员界面</span></li><li><code>cart.html</code><span>：继承</span><code>base.html</code><span>，用于实现购物车界面</span></li><li><code>comment.html</code><span>：用于实现对各个物品的评价页面</span></li><li><code>display.html</code><span>：继承</span><code>base.html</code><span>，用于实现对物品的展示功能</span></li><li><code>goods.html</code><span>：继承</span><code>base.html</code><span>，用于实现物品详情界面</span></li><li><code>graphs.html</code><span>：继承</span><code>base.html</code><span>，用于实现分析性查询及结果展示</span></li><li><code>index.html</code><span>：继承</span><code>base.html</code><span>，购物系统主界面，用于展示所有商品</span></li><li><code>index_store.html</code><span>：继承</span><code>base.html</code><span>，用于展示所有商家</span></li><li><code>login.html</code><span>：继承</span><code>base.html</code><span>，用于实现用户登录界面</span></li><li><code>order_comment.html</code><span>：继承</span><code>base.html</code><span>，用于实现订单主界面</span></li><li><code>password.html</code><span>：继承</span><code>base.html</code><span>，用于实现用户登录密码的更改</span></li><li><code>profile.html</code><span>：用于查看和修改用户个人信息</span></li><li><code>ranking.html</code><span>：继承</span><code>base.html</code><span>，用于实现商品的排序</span></li><li><code>register.htm</code><span>：继承</span><code>base.html</code><span>，用于实现新用户注册功能</span></li><li><code>store.html</code><span>：继承</span><code>base.html</code><span>，用于实现商家界面</span></li><li><code>store_admin</code><span>：继承</span><code>base.html</code><span>，用于实现商家对店铺的管理</span></li></ul><h3 id='432-系统结构设计'><span>4.3.2 系统结构设计</span></h3><p><span>		</span><span>本项目的实现基于</span><code>html</code><span>、</span><code>flask</code><span>和</span><code>SQL Server</code><span>。</span></p><p><span>		</span><span>在前端</span><code>html</code><span>中，使用</span><code>bootstrap4</code><span>的框架完成功能的实现和美化，获取后端</span><code>flask</code><span>中传来的数据在网页上实现实时数据的展示，并且通过</span><code>href</code><span>进行路由的跳转；</span></p><p><span>		</span><span>在后端</span><code>flask</code><span>中，通过</span><code>原生SQL Server语句</code><span>从数据库中获取各个路由所需要的数据并通过</span><code>render_template</code><span>渲染网页模板，实现前后端数据交互，在此基础上实现了正则表达式匹配搜索以及价格区间搜索。通过</span><code>pypyodbc</code><span>包实现跟数据库的连接，执行用户在前端的操作所对应的数据库语句，实现对数据库的实时修改；</span></p><p><span>		</span><span>数据库管理系统</span><code>SQL Server</code><span>提供底层支持，本小组在</span><code>SQL Server</code><span>中完成数据库的各项配置。</span></p><h2 id='44-数据获取策略'><span>4.4 数据获取策略</span></h2><p><span>		</span><span>根据我们所设计的数据库，我们从互联网中查找我们所需要的数据，并根据这些数据生成了一系列数据用于我们的数据库测试。</span></p><h3 id='441-管理员表手工设定5个账号插入之后的效果如下'><span>4.4.1 管理员表手工设定5个账号，插入之后的效果如下：</span></h3><p><img src=".\Images\管理员表.png" referrerpolicy="no-referrer" alt="管理员表"></p><h3 id='442-然后从网上查找相关的商品和商家数据插入对应的表中'><span>4.4.2 然后从网上查找相关的商品和商家数据插入对应的表中：</span></h3><h4 id='1-商品表'><span>(1) 商品表</span></h4><p><img src=".\Images\商品表.png" referrerpolicy="no-referrer" alt="商品表"></p><h4 id='2-商品属性表'><span>(2) 商品属性表</span></h4><p><img src=".\Images\商品属性表.png" referrerpolicy="no-referrer" alt="商品属性表"></p><h4 id='3-商品图片表'><span>(3) 商品图片表</span></h4><p><img src=".\Images\商品图片表.png" referrerpolicy="no-referrer" alt="商品图片表"></p><h4 id='4-商家表'><span>(4) 商家表</span></h4><p><img src=".\Images\商家表.png" referrerpolicy="no-referrer" alt="商家表"></p><h3 id='443-再手动插入一些用户和收货人的数据'><span>4.4.3 再手动插入一些用户和收货人的数据：</span></h3><h4 id='1-用户表-2'><span>(1) 用户表</span></h4><p><img src=".\Images\用户表.png" referrerpolicy="no-referrer" alt="用户表"></p><h4 id='2-收货人表'><span>(2) 收货人表</span></h4><p><img src=".\Images\收货人表.png" referrerpolicy="no-referrer" alt="收货人表"></p><h3 id='444-最后再在每个相应的表中插入少量数据用于测试'><span>4.4.4 最后再在每个相应的表中插入少量数据用于测试</span></h3><h4 id='1-订单表'><span>(1) 订单表</span></h4><p><img src=".\Images\订单表.png" referrerpolicy="no-referrer" alt="订单表"></p><h4 id='2-购物车表'><span>(2) 购物车表</span></h4><p><img src=".\Images\购物车表.png" referrerpolicy="no-referrer" alt="购物车表"></p><h4 id='3-标签表'><span>(3) 标签表</span></h4><p><img src=".\Images\标签表.png" referrerpolicy="no-referrer" alt="标签表"></p><h4 id='4-事物表'><span>(4) 事物表</span></h4><p><img src=".\Images\事物表.png" referrerpolicy="no-referrer" alt="事物表"></p><h2 id='45-运行测试及结果分析'><span>4.5 运行测试及结果分析</span></h2><h3 id='451-用户端功能'><span>4.5.1 用户端功能</span></h3><h4 id='1-登录-2'><span>(1) 登录</span></h4><p><span>		</span><span>涉及函数：</span><code>loginForm(), login()</code></p><p><span>		</span><span>测试流程见截图，首先点击主界面的</span><code>Sign  in</code><span>按钮跳转到登录界面，然后输入登录信息，登录成功则直接跳转到主界面，登录失败则弹出提示信息。</span></p><p><strong><span>主界面</span></strong></p><p><img src=".\Images\主界面登录.png" referrerpolicy="no-referrer" alt="主界面登录"></p><p><strong><span>登录界面</span></strong></p><p><img src=".\Images\登录界面.png" referrerpolicy="no-referrer" alt="登录界面"></p><p><strong><span>登录成功</span></strong></p><p><img src=".\Images\登录成功.png" referrerpolicy="no-referrer" alt="登录成功"></p><p><strong><span>登录失败</span></strong></p><p><img src=".\Images\登录失败.png" referrerpolicy="no-referrer" alt="登录失败"></p><h4 id='2-登出'><span>(2) 登出</span></h4><p><span>		</span><span>涉及函数：</span><code>logout()</code></p><p><span>		</span><span>在登录之后的主界面，点击下拉带有用户昵称的按钮，再点击</span><code>sigh out</code><span>按钮即可。</span></p><p><img src=".\Images\登录下拉.png" referrerpolicy="no-referrer" alt="登录下拉"></p><h4 id='3-注册'><span>(3) 注册</span></h4><p><span>		</span><span>对</span><code>user_inf</code><span>表进行插入操作，新建一个用户，涉及的函数为：</span><code>registrationForm()</code><span>和</span><code>register()</code></p><p><span>		</span><span>通过点击主界面的</span><code>sign up</code><span>按钮进入注册界面，然后填写相关信息并点击</span><code>sign up</code><span>按钮即可</span></p><p><strong><span>主界面</span></strong></p><p><img src=".\Images\主界面登录.png" referrerpolicy="no-referrer" alt="主界面登录"></p><p><strong><span>注册界面</span></strong></p><p><img src=".\Images\注册.png" referrerpolicy="no-referrer" alt="注册"></p><p><span>利用JS的函数，实现了对于两次密码的一致性检查，如果不一致，无法注册成功并会进行提醒</span></p><p><strong><span>密码</span></strong></p><p><img src=".\Images\密码不一致.png" referrerpolicy="no-referrer" alt="密码不一致"></p><p>&nbsp;</p><h4 id='4-更改密码'><span>(4) 更改密码</span></h4><p><span>涉及的函数是：</span><code>passwordForm()</code><span>和</span><code>changePassword()</code></p><p><span>在登录之后的主界面，点击下拉带有用户昵称的按钮，再点击</span><code>change Password</code><span>按钮,跳转至修改密码界面，进行密码修改操作。</span></p><p><strong><span>点击更改密码</span></strong></p><p><img src=".\Images\登录下拉.png" referrerpolicy="no-referrer" alt="登录下拉"></p><p><strong><span>更改密码界面</span></strong></p><p><img src=".\Images\更改密码.png" referrerpolicy="no-referrer" alt="更改密码"></p><p><strong><span>更改密码成功</span></strong></p><p><img src=".\Images\更改密码成功.png" referrerpolicy="no-referrer" alt="更改密码成功"></p><h4 id='5-更改个人信息'><span>(5) 更改个人信息</span></h4><p><span>涉及函数：</span><code>editProfile()</code></p><p><span>在登录之后的主界面，点击下拉带有用户昵称的按钮，进入修改个人信息的页面，然后更改个人信息，点击</span><code>Save</code><span>按钮即可</span></p><p><strong><span>点击更改个人信息</span></strong></p><p><img src=".\Images\登录下拉.png" referrerpolicy="no-referrer" alt="登录下拉"></p><p><strong><span>更改信息界面</span></strong></p><p><img src=".\Images\更改信息界面.png" referrerpolicy="no-referrer" alt="更改信息界面"></p><p><strong><span>更改信息成功</span></strong></p><p><img src=".\Images\更改信息成功.png" referrerpolicy="no-referrer" alt="更改信息成功"></p><h4 id='6-商品搜索'><span>(6) 商品搜索</span></h4><p><span>涉及的函数是：</span><code>search()</code></p><p><span>用户在主界面的商品搜索框中输入商品名称的关键字从而实现对商品的搜索，也可以在下面的价格搜索框中输入价格从而实现对商品价格的筛选</span></p><p><strong><span>搜索商品名称前</span></strong></p><p><img src=".\Images\搜索商品前.png" referrerpolicy="no-referrer" alt="搜索商品前"></p><p><strong><span>搜索商品名称后</span></strong></p><p><img src=".\Images\搜索商品后.png" referrerpolicy="no-referrer" alt="搜索商品后"></p><p><strong><span>搜索商品价格前</span></strong></p><p><img src=".\Images\搜索价格前.png" referrerpolicy="no-referrer" alt="搜索价格前"></p><p><strong><span>搜索价格后</span></strong></p><p><img src=".\Images\搜索价格后.png" referrerpolicy="no-referrer" alt="搜索价格后"></p><h4 id='7-商品排序'><span>(7) 商品排序</span></h4><p><span>涉及函数：</span><code>rank()</code></p><p><span>通过点击主界面的按销量排序、按价格排序、按库存排序三个按钮，分别实现对主界面所展示的商品的相关排序功能</span></p><p><strong><span>主界面按钮</span></strong></p><p><img src=".\Images\主界面排序按钮.png" referrerpolicy="no-referrer" alt="主界面排序按钮"></p><p><strong><span>按销量排序</span></strong></p><p><img src=".\Images\按销量排序.png" referrerpolicy="no-referrer" alt="按销量排序"></p><p><strong><span>按价格排序</span></strong></p><p><img src=".\Images\按价格排序.png" referrerpolicy="no-referrer" alt="按价格排序"></p><p><strong><span>按库存排序</span></strong></p><p><img src=".\Images\按库存排序.png" referrerpolicy="no-referrer" alt="按库存排序"></p><h4 id='8-按类型查看商品'><span>(8) 按类型查看商品</span></h4><p><span>涉及到的函数：</span><code>displayCategory(categoryId)</code></p><p><span>通过点击主界面最上方的商品不同类别的按钮，可以单独显示某一类商品</span></p><p><strong><span>主界面按钮</span></strong></p><p><img src=".\Images\主界面类型按钮.png" referrerpolicy="no-referrer" alt="主界面类型按钮"></p><p><strong><span>电子产品</span></strong></p><p><img src=".\Images\电子产品.png" referrerpolicy="no-referrer" alt="电子产品"></p><p><strong><span>图书</span></strong></p><p><img src=".\Images\图书.png" referrerpolicy="no-referrer" alt="图书"></p><p><strong><span>饮料</span></strong></p><p><img src=".\Images\饮料.png" referrerpolicy="no-referrer" alt="饮料"></p><p><strong><span>零食</span></strong></p><p><img src=".\Images\零食.png" referrerpolicy="no-referrer" alt="零食"></p><p><strong><span>化妆品</span></strong></p><p><img src=".\Images\化妆品.png" referrerpolicy="no-referrer" alt="化妆品"></p><h4 id='9-添加购物车'><span>(9) 添加购物车</span></h4><p><span>涉及到的函数是：</span><code>addToCart()</code></p><p><span>用户通过点击商品下面的</span><code>Add to Cart</code><span>按钮将物品加入购物车中，添加成功之后会有成功提示</span></p><p><strong><span>添加购物车</span></strong></p><p><img src=".\Images\添加购物车.png" referrerpolicy="no-referrer" alt="添加购物车"></p><p><strong><span>添加购物车成功</span></strong></p><p><img src=".\Images\添加购物车成功.png" referrerpolicy="no-referrer" alt="添加购物车成功"></p><h4 id='10-在购物车中进行商品购买'><span>(10) 在购物车中进行商品购买</span></h4><p><span>涉及的函数是：</span><code>newOrder()</code><span>和</span><code>newAllOrder()</code></p><p><span>在购物车中购买物品时有两种购买方式，一种是点击每个物品下面的</span><code>Buy Items</code><span>按钮来实现对单中商品的购买；另一种方式是直接点击购物车页面最上面的</span><code>Buy All</code><span>按钮来购买购物车中的所有物品。</span></p><p><strong><span>购买单种商品</span></strong></p><p><img src=".\Images\购买单种商品.png" referrerpolicy="no-referrer" alt="购买单种商品"></p><p><strong><span>购买单种商品成功</span></strong></p><p><img src=".\Images\购买单个商品成功.png" referrerpolicy="no-referrer" alt="购买单个商品成功"></p><p><strong><span>购买所有商品</span></strong></p><p><img src=".\Images\购买全部商品.png" referrerpolicy="no-referrer" alt="购买全部商品"></p><p><strong><span>购买所有商品成功</span></strong></p><p><img src=".\Images\购买全部商品成功.png" referrerpolicy="no-referrer" alt="购买全部商品成功"></p><h4 id='11-订单搜索'><span>(11) 订单搜索</span></h4><p><span>涉及函数：</span><code>orderSearch()</code></p><p><span>用户在搜索框中输入购买过的商品的名称，再点击</span><code>Search</code><span>按钮即可</span></p><p><strong><span>订单搜索前</span></strong></p><p><img src=".\Images\订单搜索前.png" referrerpolicy="no-referrer" alt="订单搜索前"></p><p><strong><span>订单搜索后</span></strong></p><p><img src=".\Images\订单搜索后.png" referrerpolicy="no-referrer" alt="订单搜索后"></p><h4 id='12-订单评价'><span>(12) 订单评价</span></h4><p><span>涉及函数：</span><code>commentForm()</code><span>，</span><code>comment()</code></p><p><span>点击订单旁边的</span><code>comment</code><span>按钮对订单进入评论界面，然后对商品进行评论；如果以及评论过，则点击订单右边的</span><code>Recomment</code><span>按钮进入评论界面，对商品重新进行评论</span></p><p><strong><span>评论与重评论</span></strong></p><p><img src=".\Images\评论与重评论.png" referrerpolicy="no-referrer" alt="评论与重评论"></p><p><strong><span>评论界面</span></strong></p><p><img src=".\Images\评论界面.png" referrerpolicy="no-referrer" alt="评论界面"></p><h3 id='452-商家端功能'><span>4.5.2 商家端功能</span></h3><p><span>如果用户开设了店铺，则其可以通过点击下拉带有用户昵称的按钮，再点击</span><code>My shop</code><span>按钮便可以进入商家管理界面</span></p><h4 id='进入商家管理界面'><span>进入商家管理界面</span></h4><p><img src=".\Images\登录下拉.png" referrerpolicy="no-referrer" alt="登录下拉"></p><h4 id='商家管理界面'><span>商家管理界面</span></h4><p><img src=".\Images\商家管理界面.png" referrerpolicy="no-referrer" alt="商家管理界面"></p><h4 id='1-销售统计'><span>(1) 销售统计</span></h4><p><span>涉及的函数：</span><code>draw_sales_line()</code><span>，</span><code>draw_profits_chart()</code><span>，</span><code>draw_sales_chart()</code><span>，</span><code>draw_profits_line()</code><span>，</span><code>draw_sales_goods()</code><span>，</span><code>draw_profits_goods()</code><span>，</span><code>draw_year_profits()</code></p><p><span>相关的条件结果会自动以图形的形式显示，下拉商家管理界面即可看到</span></p><p><strong><span>销售统计图</span></strong></p><p><img src=".\Images\销售统计1.png" referrerpolicy="no-referrer" alt="销售统计1"></p><p><img src=".\Images\销售统计2.png" referrerpolicy="no-referrer" alt="销售统计2"></p><h4 id='2--下架商品'><span>(2)  </span><strong><span>下架商品</span></strong></h4><p><span>涉及的函数：</span><code>removeItem()</code></p><p><span>点击商家管理界面中商品下的下架商品按钮实现对特定商品的下架</span></p><p><strong><span>下架</span></strong></p><p><img src=".\Images\下架.png" referrerpolicy="no-referrer" alt="下架"></p><p><strong><span>下架成功</span></strong></p><p><img src=".\Images\下架成功.png" referrerpolicy="no-referrer" alt="下架成功"></p><h4 id='3-添加商品'><span>(3) 添加商品</span></h4><p><span>涉及的函数：</span><code>addItem()</code></p><p><span>通过填写商家管理页面下添加商品的表并点击提交按钮提交便可实现对商品的添加</span></p><p><strong><span>添加商品</span></strong></p><p><img src=".\Images\添加商品.png" referrerpolicy="no-referrer" alt="添加商品"></p><p><strong><span>添加商品成功</span></strong></p><p><img src=".\Images\添加商品成功.png" referrerpolicy="no-referrer" alt="添加商品成功"></p><h3 id='453-管理员功能'><span>4.5.3 管理员功能</span></h3><p><span>如果用户为超级管理员，则其可以通过点击下拉带有用户昵称的按钮，再点击</span><code>Admin&#39;s center</code><span>按钮便可以进入超级管理员界面</span></p><h4 id='进入管理员界面'><span>进入管理员界面</span></h4><p><img src="D:\osswh\OSS\Images\登录下拉.png" referrerpolicy="no-referrer" alt="登录下拉"></p><h4 id='管理员界面'><span>管理员界面</span></h4><p><img src=".\Images\管理员界面.png" referrerpolicy="no-referrer" alt="管理员界面"></p><h4 id='1-处理事务'><span>(1) 处理事务</span></h4><p><span>涉及函数：</span></p><p><span>通过点击各个事务旁边的按钮来实现对事务的处理</span></p><p><strong><span>事务处理</span></strong></p><p><img src=".\Images\事务处理.png" referrerpolicy="no-referrer" alt="事务处理"></p><p><strong><span>事务处理成功</span></strong></p><p><img src=".\Images\事物通过成功.png" referrerpolicy="no-referrer" alt="事物通过成功"></p><h4 id='2-商店管理'><span>(2) 商店管理</span></h4><p><span>涉及的函数：</span></p><p><span>通过点击每个店铺旁边的</span><code>进入商店</code><span>按钮来进入商店管理界面，实现与什么相同的对商家的操作，继续下拉可以看到各个店铺的销售情况</span></p><p><strong><span>进入商店</span></strong></p><p><img src=".\Images\管理员商店管理.png" referrerpolicy="no-referrer" alt="管理员商店管理"></p><p><strong><span>销售情况</span></strong></p><p><img src=".\Images\销售情况.png" referrerpolicy="no-referrer" alt="销售情况"></p><h4 id='3-用户管理'><span>(3) 用户管理</span></h4><p><span>涉及函数：</span></p><p><span>下拉管理员界面，管理员可以看到每个省用户所贡献的销售额，同时可以给出每个用户购买次数最多的商品</span></p><p><strong><span>各省销售额</span></strong></p><p><img src=".\Images\各省销售额.png" referrerpolicy="no-referrer" alt="各省销售额"></p><p><strong><span>购买次数最多的商品</span></strong></p><p><img src=".\Images\购买次数最多的商品.png" referrerpolicy="no-referrer" alt="购买次数最多的商品"></p><h1 id='五项目实施过程中遇到的问题'><span>五、项目实施过程中遇到的问题</span></h1><h2 id='问题一'><span>问题一</span></h2><h3 id='1-问题描述-1'><span>(1) 问题描述</span></h3><p><span>		</span><span>当小组中某一成员在进行购买商品操作时购买失败，后台显示出现死锁</span></p><p><img src=".\Images\死锁.png" referrerpolicy="no-referrer" alt="死锁"></p><h3 id='2-原因分析-1'><span>(2) 原因分析</span></h3><p><span>		</span><span>当小组中一名成员在进行购买商品的操作时，首先要对购物车表进行读取，对其加上了S锁，然后为了将相关数据插入订单表中，申请对其的X锁。而此时，另一小组成员进行的操作，已经对订单表加上了锁，因此等待其释放此锁，同时，他所进行的操作要对购物车表加X锁。于是两个事务相互等待，最终陷入了死锁状态。</span></p><div class="md-diagram-panel md-fences-adv-panel"><svg id="mermaidChart1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="61.333335876464844" style="max-width: 143.125px;" viewBox="0 0.0000019073486328125 143.125 61.333335876464844"><style>#mermaidChart1{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart1 .error-icon{fill:#552222;}#mermaidChart1 .error-text{fill:#552222;stroke:#552222;}#mermaidChart1 .edge-thickness-normal{stroke-width:2px;}#mermaidChart1 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart1 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart1 .marker{fill:#333333;}#mermaidChart1 .marker.cross{stroke:#333333;}#mermaidChart1 svg{font-family:sans-serif;font-size:16px;}#mermaidChart1 .label{font-family:sans-serif;color:#333;}#mermaidChart1 .label text{fill:#333;}#mermaidChart1 .node rect,#mermaidChart1 .node circle,#mermaidChart1 .node ellipse,#mermaidChart1 .node polygon,#mermaidChart1 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart1 .node .label{text-align:center;}#mermaidChart1 .node.clickable{cursor:pointer;}#mermaidChart1 .arrowheadPath{fill:#333333;}#mermaidChart1 .edgePath .path{stroke:#333333;stroke-width:1.5px;}#mermaidChart1 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart1 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaidChart1 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaidChart1 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart1 .cluster text{fill:#333;}#mermaidChart1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80,100%,96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart1:root{--mermaid-font-family:sans-serif;}#mermaidChart1:root{--mermaid-alt-font-family:sans-serif;}#mermaidChart1 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath LS-T1 LE-T2" id="L-T1-T2" style="opacity: 1;"><path class="path" d="M46.5625,26.312396447256408L71.5625,20.66666603088379L96.5625,26.312396447256408" marker-end="url(#arrowhead17)" style="fill:none"></path><defs><marker id="arrowhead17" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-T2 LE-T1" id="L-T2-T1" style="opacity: 1;"><path class="path" d="M96.5625,35.020935614511174L71.5625,40.66666603088379L46.5625,35.020935614511174" marker-end="url(#arrowhead18)" style="fill:none"></path><defs><marker id="arrowhead18" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-T1-18" transform="translate(27.28125,30.66666603088379)" style="opacity: 1;"><rect rx="0" ry="0" x="-19.28125" y="-22.666666984558105" width="38.5625" height="45.33333396911621" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-9.28125,-12.666666984558105)"><foreignObject width="18.5625" height="25.33333396911621"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">T1</div></foreignObject></g></g></g><g class="node default" id="flowchart-T2-19" transform="translate(115.84375,30.66666603088379)" style="opacity: 1;"><rect rx="0" ry="0" x="-19.28125" y="-22.666666984558105" width="38.5625" height="45.33333396911621" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-9.28125,-12.666666984558105)"><foreignObject width="18.5625" height="25.33333396911621"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">T2</div></foreignObject></g></g></g></g></g></g></svg></div><p>&nbsp;</p><h3 id='3-解决方法-1'><span>(3) 解决方法</span></h3><p><span>		</span><span>系统自动牺牲某一进程，从而解决了问题。</span></p><h2 id='问题二'><span>问题二</span></h2><h3 id='1-问题描述-2'><span>(1) 问题描述</span></h3><p><span>		</span><span>在</span><code>flask</code><span>后端中对数据库进行操作时，要使用</span><code>cursor()</code><span>游标进行操作，该游标获取数据时是一次性的，当程序把游标中的值赋给其它变量时，游标内的值会清空，会导致多次赋值失败；</span><code>fetchall()</code><span>和</span><code>fetchone()</code><span>也存在区别，操作不当会导致对控制进行操作，从而程序运行失败。</span></p><p><img src=".\Images\问题.png" referrerpolicy="no-referrer" alt="flask"></p><h3 id='2-原因分析-2'><span>(2) 原因分析</span></h3><p><span>		</span><code>cursor()</code><span>是暂时的存储形式，一旦取出数值后会变成空值，</span><code>fetchall()</code><span>获取的是列表，维数会比目标数值多一个维度，也可能是</span><code>T-SQL</code><span>语句的错误导致获取数据失败。</span></p><h3 id='3-解决方法-2'><span>(3) 解决方法</span></h3><p><span>		</span><span>在使用变量</span><code>itemData</code><span>获取数值后，要先通过</span><code>not(itemData)</code><span>判断是否为空，再进行操作。</span></p><h2 id='问题三'><span>问题三</span></h2><h3 id='1-问题描述-3'><span>(1) 问题描述</span></h3><p><span>		</span><span>同一个数据库在不同浏览器进行操作会出现以下情况，第二张图片的第二个商家对应的图标并不存在于电脑中。</span></p><p><img src=".\Images\cookies(1).png" referrerpolicy="no-referrer" alt="flask"></p><p><img src=".\Images\cookies.png" referrerpolicy="no-referrer" alt="flask"></p><p>&nbsp;</p><h3 id='2-原因分析-3'><span>(2) 原因分析</span></h3><p><span>		</span><span>浏览器</span><code>cookies</code><span>存储了信息，会保留历史信息从而没有实现实时图片显示。</span></p><h3 id='3-解决方法-3'><span>(3) 解决方法</span></h3><p><span>		</span><span>删除浏览器</span><code>cookies</code><span>。</span></p><h2 id='问题四'><span>问题四</span></h2><h3 id='1-问题描述-4'><span>(1) 问题描述</span></h3><p><span>		</span><span>在创建shopping_cart（购物车表）时如果添加goods_id则会出现冗余，但如果不添加时则查询效率很低。</span></p><h3 id='2-原因分析-4'><span>(2) 原因分析</span></h3><p><span>		</span><span>数据库设计时经常会遇到查询效率以及冗余之间的平衡问题，在此要做出一些取舍。</span></p><h3 id='3-解决方法-4'><span>(3) 解决方法</span></h3><p><span>		</span><span>最终为了保证查询效率在shopping_cart表中添加了good_id一列。</span></p><h2 id='问题五'><span>问题五</span></h2><h3 id='1-问题描述-5'><span>(1) 问题描述</span></h3><p><span>		</span><span>最初创建表时将用户表、事务表以及管理员表分别命名为user、transaction、admin，导致使用查询语句时出线一系列错误。</span></p><h3 id='2-原因分析-5'><span>(2) 原因分析</span></h3><p><span>		</span><span>user, transaction, admin 等表名与SQL Server关键字重复，直接使用时系统会将其当作关键字进行处理，而不是认为其是表。</span></p><h3 id='3-解决方法-5'><span>(3) 解决方法</span></h3><p><span>		</span><span>&quot;用户表&quot;、&quot;管理员表&quot;、&quot;事务表&quot;的表名并不设为&quot;user&quot;、&quot;admin&quot;以及&quot;transaction&quot;，而是在三个表名之后添加&#39;_inf&#39;。</span></p><h2 id='问题六'><span>问题六</span></h2><h3 id='1-问题描述-6'><span>(1) 问题描述</span></h3><p><span>		</span><span>在使用游标</span><code>cursor.execute()</code><span>向本地数据库中传入将要执行的SQL语句时，出现如下报错</span><code>TypeError: Params must be in a list, tuple, or Row</code><span>。</span></p><h3 id='2-原因分析-6'><span>(2) 原因分析</span></h3><p><span>		</span><span>pypyodbc库支持在SQL语句中使用</span><code>?</code><span>作为参数，以保证更安全和高效的参数传递。但</span><code>cursor.execute(sql, *parameters)</code><span>要求传入的参数为列表、元组或ROW格式，因此即使仅需传入一个参数，也要将其写成多值形式。  </span></p><h3 id='3-解决方法-6'><span>(3) 解决方法</span></h3><p><span>		</span><span>将</span><code>cur.execute(&quot;SELECT user_id, username FROM user_inf WHERE email = ?&quot;, (email))</code><span>改为</span><code>cur.execute(&quot;SELECT user_id, username FROM user_inf WHERE email = ?&quot;, (email, ))</code></p><h2 id='问题七'><span>问题七</span></h2><h3 id='1-问题描述-7'><span>(1) 问题描述</span></h3><p><span>		</span><span>在绘制各商品销量统计图的过程中，有时会出现如下报错：</span><code>unsupported operand type(s) for *: &#39;NoneType&#39; and &#39;NoneType&#39;</code><span>。</span></p><h3 id='2-原因分析-7'><span>(2) 原因分析</span></h3><p><span>		</span><span>有些商品因为没有用户购买，所以不会出现在订单表中。因此在选取某些商品计算销量时，SQL Server返回的有可能是空值，空值之间自然不能进行各种操作。</span></p><h3 id='3-解决方法-7'><span>(3) 解决方法</span></h3><p><span>		</span><span>在使用</span><code>fetchall()</code><span>或</span><code>fetchone()</code><span>函数后，都要先判断取出的值是否为空，若为空，则表示该商品没有被卖出，跳过；若非空，则进行后续的操作。</span></p><h1 id='六团队分工'><span>六、团队分工</span></h1><p><span>刘凯祥：报告撰写、SQL语句实现、汇报展示、数据库设计（主要）（</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.147ex" height="1.824ex" role="img" focusable="false" viewBox="0 -750 1833 806" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.127ex;"><defs><path id="MJX-12-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-12-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-12-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-12-TEX-N-32"></use><use data-c="30" xlink:href="#MJX-12-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mi" transform="translate(1000,0)"><use data-c="25" xlink:href="#MJX-12-TEX-N-25"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>20</mn><mi mathvariant="normal">%</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">20\%</script><span>）</span></p><p><span>王睿之：报告撰写、网页设计及前后端交互（主要）、视频录制、数据库设计（</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.147ex" height="1.824ex" role="img" focusable="false" viewBox="0 -750 1833 806" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.127ex;"><defs><path id="MJX-12-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-12-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-12-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-12-TEX-N-32"></use><use data-c="30" xlink:href="#MJX-12-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mi" transform="translate(1000,0)"><use data-c="25" xlink:href="#MJX-12-TEX-N-25"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>20</mn><mi mathvariant="normal">%</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">20\%</script><span>）</span></p><p><span>徐瑞泽：报告撰写、网页设计及前后端交互（主要）、数据库设计（</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.147ex" height="1.824ex" role="img" focusable="false" viewBox="0 -750 1833 806" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.127ex;"><defs><path id="MJX-12-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-12-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-12-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-12-TEX-N-32"></use><use data-c="30" xlink:href="#MJX-12-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mi" transform="translate(1000,0)"><use data-c="25" xlink:href="#MJX-12-TEX-N-25"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>20</mn><mi mathvariant="normal">%</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">20\%</script><span>）</span></p><p><span>陈一航：报告撰写、网页设计、PPT制作、数据库设计（主要）（</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.147ex" height="1.824ex" role="img" focusable="false" viewBox="0 -750 1833 806" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.127ex;"><defs><path id="MJX-12-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-12-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-12-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-12-TEX-N-32"></use><use data-c="30" xlink:href="#MJX-12-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mi" transform="translate(1000,0)"><use data-c="25" xlink:href="#MJX-12-TEX-N-25"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>20</mn><mi mathvariant="normal">%</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">20\%</script><span>）</span></p><p><span>王浩：报告撰写、网页设计、数据库设计（主要）、数据查找（</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.147ex" height="1.824ex" role="img" focusable="false" viewBox="0 -750 1833 806" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.127ex;"><defs><path id="MJX-12-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-12-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-12-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-12-TEX-N-32"></use><use data-c="30" xlink:href="#MJX-12-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mi" transform="translate(1000,0)"><use data-c="25" xlink:href="#MJX-12-TEX-N-25"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>20</mn><mi mathvariant="normal">%</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">20\%</script><span>）</span></p><h1 id='七项目资源'><span>七、项目资源</span></h1><ul><li><span>本项目使用 GitHub 进行维护和多人合作，项目GitHub地址：</span><a href='https://github.com/Liu-Kaixiang/OSS' target='_blank' class='url'>https://github.com/Liu-Kaixiang/OSS</a></li><li><span>成果展示视频链接：</span><a href='https://space.bilibili.com/319300629/dynamic' target='_blank' class='url'>https://space.bilibili.com/319300629/dynamic</a><span> </span></li></ul><div style="page-break-after:always;"></div><h1 id='参考文献和资料'><span>参考文献和资料</span></h1><h2 id='1-虚拟环境的配置'><span>1. 虚拟环境的配置</span></h2><ul><li><a href='https://blog.csdn.net/guying4875/article/details/80905472' target='_blank' class='url'>https://blog.csdn.net/guying4875/article/details/80905472</a></li><li><a href='https://blog.csdn.net/happy_bigqiang/article/details/51168614?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-4' target='_blank' class='url'>https://blog.csdn.net/happy_bigqiang/article/details/51168614?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-4</a></li><li><a href='https://blog.csdn.net/Growing_hacker/article/details/89518534' target='_blank' class='url'>https://blog.csdn.net/Growing_hacker/article/details/89518534</a></li></ul><h2 id='2-boostrap参考'><span>2. boostrap参考</span></h2><ul><li><a href='https://how2j.cn/k/boostrap/boostrap-setup/539.html' target='_blank' class='url'>https://how2j.cn/k/boostrap/boostrap-setup/539.html</a><span>如何使用boostrap（不涉及flask）</span></li><li><a href='https://v4.bootcss.com/docs/getting-started/download/' target='_blank' class='url'>https://v4.bootcss.com/docs/getting-started/download/</a><span> boostrap安装到本地</span></li><li><a href='https://www.layoutit.com/build' target='_blank' class='url'>https://www.layoutit.com/build</a><span> 网页设计</span></li><li><a href='https://www.runoob.com/bootstrap/bootstrap-tutorial.html' target='_blank' class='url'>https://www.runoob.com/bootstrap/bootstrap-tutorial.html</a><span>菜鸟教程</span></li></ul><h2 id='3-flask教程'><span>3. flask教程</span></h2><ul><li><a href='https://www.w3cschool.cn/flask/' target='_blank' class='url'>https://www.w3cschool.cn/flask/</a><span> W3教程</span></li><li><a href='https://blog.csdn.net/hanbo6/article/details/82563015' target='_blank' class='url'>https://blog.csdn.net/hanbo6/article/details/82563015</a><span>；</span><a href='https://blog.csdn.net/wei18791957243/article/details/85237246' target='_blank' class='url'>https://blog.csdn.net/wei18791957243/article/details/85237246</a><span>用户登录功能的session方法</span></li><li><span>Flask Web开发：基于Python的Web应用开发实战，[美］Miguel Grinberg 著，安道 译，北京：人民邮电出版社</span></li></ul><h2 id='4-部分网页设计参考'><span>4. 部分网页设计参考</span></h2><ul><li><a href='https://blog.csdn.net/u014131617/article/details/90900981?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=html%E8%AF%84%E5%88%86%E5%8A%9F%E8%83%BD&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-8-90900981.first_rank_v2_pc_rank_v29&amp;spm=1018.2226.3001.4187' target='_blank' class='url'>https://blog.csdn.net/u014131617/article/details/90900981?ops_request_misc=&request_id=&biz_id=102&utm_term=html%E8%AF%84%E5%88%86%E5%8A%9F%E8%83%BD&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-8-90900981.first_rank_v2_pc_rank_v29&spm=1018.2226.3001.4187</a></li></ul><h2 id='5-数据库相关'><span>5. 数据库相关</span></h2><ul><li><a href='https://blog.csdn.net/jishanwang/article/details/86749027' target='_blank' class='url'>https://blog.csdn.net/jishanwang/article/details/86749027</a></li><li><a href='https://blog.csdn.net/Yayou_com/article/details/81432258' target='_blank' class='url'>https://blog.csdn.net/Yayou_com/article/details/81432258</a></li><li><a href='https://www.cnblogs.com/ggll611928/p/13469911.html' target='_blank' class='url'>https://www.cnblogs.com/ggll611928/p/13469911.html</a></li></ul><h2 id='6-github相关'><span>6. GitHub相关</span></h2><ul><li><a href='https://segmentfault.com/a/1190000015798490' target='_blank' class='url'>https://segmentfault.com/a/1190000015798490</a></li></ul><h2 id='7-部分数据来源'><span>7. 部分数据来源</span></h2><ul><li><a href='https://www.jd.com/' target='_blank' class='url'>https://www.jd.com/</a><span>京东商城</span></li><li><a href='https://www.taobao.com/' target='_blank' class='url'>https://www.taobao.com/</a><span>淘宝网</span></li></ul><p>&nbsp;</p><p>&nbsp;</p></div></div>
</body>
</html>